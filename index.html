<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --primary: #0f3460;
            --secondary: #16213e;
            --background: #1a1a2e;
            --card-background: #1f4068;
            --text-primary: #ffffff;
            --text-secondary: #b8c1ec;
            --highlight: #e94560;
            --accent: #4a5d8c;
            --success: #38b2ac;
            --scheduled-secondary: #007bff; /* Color for scheduled matches in white cards */
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        a {
            color: var(--highlight);
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }

        /* --- Header/Nav --- */
        header {
            background-color: var(--primary);
            padding: 10px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo a {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-primary);
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .nav-links a, .nav-links button {
            color: var(--text-primary);
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background-color 0.3s;
            background: none;
            border: none;
            cursor: pointer;
        }
        
        .nav-links a:hover, .nav-links button:hover {
            background-color: var(--secondary);
            text-decoration: none;
        }

        /* Search */
        .search-box {
            position: relative;
            margin-right: 20px;
        }
        
        .search-box input {
            padding: 8px 15px;
            border-radius: 20px;
            border: none;
            background-color: var(--secondary);
            color: var(--text-primary);
            width: 200px;
        }
        
        .search-box input:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--highlight);
        }
        
        #searchResults {
            position: absolute;
            top: 100%;
            left: 0;
            width: 300px;
            max-height: 300px;
            overflow-y: auto;
            background-color: var(--card-background);
            border: 1px solid var(--accent);
            border-top: none;
            border-radius: 0 0 8px 8px;
            z-index: 500;
            display: none;
        }
        
        .search-result-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid var(--secondary);
            transition: background-color 0.2s;
        }
        
        .search-result-item:hover {
            background-color: var(--accent);
        }

        /* Notification */
        .notification-btn-container {
            position: relative;
        }
        
        #notificationBtn {
            font-size: 1.2rem;
            padding: 5px 10px;
            position: relative;
        }
        
        #notificationBadge {
            position: absolute;
            top: 0px;
            right: 0px;
            background-color: var(--highlight);
            color: var(--text-primary);
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.7rem;
            line-height: 1;
            min-width: 20px;
            text-align: center;
            display: none; /* Controlled by JS */
        }
        
        #notificationPanel {
            position: absolute;
            top: 100%;
            right: 0;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
            background-color: var(--card-background);
            border: 1px solid var(--accent);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            z-index: 1001;
            display: none;
            flex-direction: column;
            padding: 15px;
        }
        
        #notificationPanel.active {
            display: flex;
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            border-bottom: 1px solid var(--accent);
            padding-bottom: 10px;
        }
        
        .notification-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--secondary);
        }
        
        .notification-match {
            font-weight: bold;
            color: var(--highlight);
        }
        
        .notification-time {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .notification-actions {
            margin-top: 5px;
        }
        
        .notification-btn {
            background: var(--accent);
            color: var(--text-primary);
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-right: 5px;
            transition: background 0.3s;
        }
        
        .notification-btn.watch {
            background: var(--success);
        }
        
        .notification-btn.watch:hover {
            background: #2c938c;
        }
        
        .notification-btn.remove:hover {
            background: #e94560;
        }

        /* --- Sport Tabs (Desktop) --- */
        .sport-tabs {
            display: flex;
            justify-content: center;
            padding: 15px 0;
            background-color: var(--secondary);
        }
        
        .sport-tab {
            padding: 10px 20px;
            margin: 0 10px;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s;
            color: var(--text-secondary);
        }
        
        .sport-tab:hover {
            color: var(--text-primary);
            border-color: var(--accent);
        }
        
        .sport-tab.active {
            background-color: var(--highlight);
            color: var(--text-primary);
            border-color: var(--highlight);
            box-shadow: 0 0 10px rgba(233, 69, 96, 0.5);
        }

        /* --- Main Content Structure --- */
        .main-content {
            padding: 20px 0;
            min-height: calc(100vh - 200px);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
        }
        
        .section-header h2 {
            font-size: 1.8rem;
            color: var(--highlight);
        }
        
        .section-header a {
            color: var(--text-secondary);
            font-weight: bold;
        }

        /* --- Hero Carousel --- */
        .hero-carousel-section {
            height: 350px;
            background-size: cover;
            background-position: center top;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
            position: relative;
            transition: background-image 0.5s ease-in-out;
        }
        
        .hero-card {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            padding: 40px;
            background: linear-gradient(to right, rgba(26, 26, 46, 0.9) 30%, rgba(26, 26, 46, 0.6) 60%, rgba(26, 26, 46, 0));
        }
        
        .hero-content {
            max-width: 600px;
        }
        
        .hero-league-info {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .hero-league-logo {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            background-color: white;
            padding: 3px;
        }
        
        .hero-league-name {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: bold;
        }
        
        .hero-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            line-height: 1.1;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .hero-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .hero-btn.btn-primary {
            background-color: var(--highlight);
            color: var(--text-primary);
        }
        
        .hero-btn.btn-primary:hover {
            background-color: #d1324d;
        }

        /* --- Match Grids --- */
        .match-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .match-card-link {
            text-decoration: none;
            color: inherit;
            cursor: pointer;
        }
        
        .match-card {
            background-color: var(--card-background);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 180px;
        }
        
        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }

        /* Live Match Card Styling */
        .match-card-link.live-match .match-card {
            background-color: var(--text-primary);
            color: var(--background);
            border: 2px solid var(--highlight);
            animation: pulse-live 1.5s infinite;
        }
        
        @keyframes pulse-live {
            0% { box-shadow: 0 0 0 0 rgba(233, 69, 96, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(233, 69, 96, 0); }
            100% { box-shadow: 0 0 0 0 rgba(233, 69, 96, 0); }
        }

        .match-info {
            flex-grow: 1;
        }
        
        .match-info h3 {
            font-size: 1.3rem;
            margin: 5px 0;
            line-height: 1.3;
        }
        
        .match-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .live-match .match-info p {
            color: var(--background) !important;
        }
        
        .match-logo {
            float: right;
            margin-left: 10px;
        }
        
        .match-logo img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }
        
        .stream-btn-visual {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            color: var(--text-primary);
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: opacity 0.3s;
        }
        
        .stream-btn-visual:hover {
            opacity: 0.9;
        }

        /* --- Mobile Filter Tabs (Inline) --- */
        .mobile-filter-section {
            background-color: var(--secondary);
            padding: 10px 0;
            margin-bottom: 20px;
            display: none; /* Hidden by default, shown on mobile for 'live' sport */
        }
        
        .mobile-filter-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .sport-tab-inline {
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-secondary);
            background-color: var(--card-background);
            transition: background-color 0.3s, color 0.3s;
        }
        
        .sport-tab-inline.active {
            background-color: var(--highlight);
            color: var(--text-primary);
        }

        /* --- Footer --- */
        footer {
            background-color: var(--primary);
            padding: 30px 0 10px;
            margin-top: 30px;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--accent);
        }
        
        .footer-section {
            flex: 1 1 300px;
            margin-bottom: 20px;
        }
        
        .footer-section h4 {
            color: var(--highlight);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .footer-section ul {
            list-style: none;
            padding: 0;
        }
        
        .footer-section ul li a {
            color: var(--text-secondary);
            display: block;
            padding: 3px 0;
            transition: color 0.3s;
        }
        
        .footer-section ul li a:hover {
            color: var(--text-primary);
            text-decoration: none;
        }

        /* --- Modal Styling --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none; /* Controlled by JS */
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--background);
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            animation: slide-down 0.3s ease-out;
        }
        
        @keyframes slide-down {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .modal-close:hover {
            color: var(--highlight);
        }
        
        .modal-header {
            border-bottom: 1px solid var(--accent);
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        
        .modal-title {
            font-size: 1.8rem;
            color: var(--highlight);
            margin-bottom: 5px;
        }
        
        .modal-league {
            font-size: 1rem;
            color: var(--text-secondary);
        }
        
        .modal-details {
            margin-bottom: 20px;
        }
        
        .modal-detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed var(--secondary);
        }
        
        .modal-detail-label {
            font-weight: bold;
            color: var(--text-primary);
        }
        
        .modal-detail-value {
            color: var(--text-secondary);
        }
        
        .modal-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .modal-btn {
            flex-grow: 1;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s;
        }
        
        .modal-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .modal-btn-primary {
            background-color: var(--highlight);
            color: var(--text-primary);
        }
        
        .modal-btn-secondary {
            background-color: var(--accent);
            color: var(--text-primary);
        }

        /* --- Toast Notification --- */
        .toast-notification {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background-color: var(--success);
            color: var(--text-primary);
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            z-index: 3000;
            opacity: 0;
            transform: translateX(100%);
            transition: opacity 0.5s, transform 0.5s;
        }
        
        .toast-notification.active {
            opacity: 1;
            transform: translateX(0);
        }
        
        .toast-match {
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .toast-time {
            font-size: 0.9rem;
        }

        /* --- Mobile Dock --- */
        .mobile-bottom-dock {
            display: none; /* Hidden by default */
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--primary);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
            z-index: 1500;
            justify-content: space-around;
            padding: 10px 0;
        }
        
        .dock-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.8rem;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s;
        }
        
        .dock-item i {
            font-size: 1.5rem;
            margin-bottom: 3px;
        }
        
        .dock-item.active {
            color: var(--highlight);
        }

        /* --- Responsive Design (Mac/Desktop vs Mobile) --- */
        
        /* Mobile View (Below 768px) */
        @media (max-width: 767px) {
            .nav-links {
                display: none; /* Hide desktop links */
            }
        
            .nav-content {
                justify-content: center;
            }
        
            .search-box {
                display: none; /* Hide search input on small screens */
            }
        
            .sport-tabs {
                display: none; /* Hide desktop sport tabs */
            }
        
            .mobile-bottom-dock {
                display: flex; /* Show mobile dock */
            }
        
            .container {
                width: 95%;
            }
        
            .hero-carousel-section {
                height: 250px;
                margin-bottom: 20px;
            }
        
            .hero-card {
                padding: 20px;
                background: linear-gradient(to right, rgba(26, 26, 46, 0.9) 50%, rgba(26, 26, 46, 0.4) 80%, rgba(26, 26, 46, 0));
            }
        
            .hero-title {
                font-size: 1.8rem;
            }
        
            .hero-subtitle {
                font-size: 1rem;
            }
        
            .hero-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
        
            .match-grid {
                grid-template-columns: 1fr;
            }
        
            .modal-content {
                width: 95%;
                margin: 20px;
            }
        
            .modal-overlay {
                align-items: flex-start;
                padding-top: 50px;
            }
        
            /* Mobile content containers must be explicitly managed by JS */
            #liveTabContent, #scheduleContent, #accountContent {
                display: none; 
            }
        }
    </style>
</head>
<body>

<header>
    <div class="container">
        <div class="nav-content">
            <div class="logo">
                <a href="index.html">R T T</a>
            </div>
            <div class="nav-links">
                <div class="search-box">
                    <input type="text" id="searchInputDesktop" placeholder="Search matches or leagues...">
                    <div id="searchResults"></div>
                </div>
                <div class="notification-btn-container">
                    <button id="notificationBtn">
                        <i class="fas fa-bell"></i>
                        <span id="notificationBadge">0</span>
                    </button>
                    <div id="notificationPanel">
                        <div class="notification-header">
                            <h3>Reminders</h3>
                            <button class="modal-close" id="notificationPanelClose">&times;</button>
                        </div>
                        <div id="notificationList">
                            </div>
                    </div>
                </div>
                <a href="#">Account</a>
            </div>
        </div>
    </div>
</header>

<div class="sport-tabs">
    <div class="container">
        <div class="nav-content">
            <div class="sport-tab active" data-sport="live">
                <i class="fas fa-broadcast-tower"></i> Live & Football
            </div>
            <div class="sport-tab" data-sport="others">
                <i class="fas fa-ellipsis-h"></i> Other Sports
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="main-content">

        <div id="homeContent" style="display: block;"> 

            <div class="section-header" style="margin-top: 30px;">
                <h2 id="sportTitle">Live</h2>
            </div>
    
            <section class="hero-carousel-section">
                <div class="hero-carousel" id="heroCarousel">
                    </div>
            </section>
    
            <div class="mobile-filter-section">
                <div class="mobile-filter-tabs">
                    <div class="sport-tab-inline active" data-filter="live">Live Now</div>
                    <div class="sport-tab-inline" data-filter="scheduled">Scheduled</div>
                </div>
            </div>
    
            <section id="liveSection">
                <div id="mobileLiveSection" style="display: none;">
                    <div class="section-header">
                        <h3 id="mobileFilterTitle">Live Matches</h3>
                    </div>
                    <div class="match-grid" id="mobileLiveContainer">
                        </div>
                </div>
    
                <div id="mobileScheduledSection" style="display: none;">
                    <div class="section-header">
                        <h3 id="mobileFilterTitleScheduled">Scheduled Matches</h3>
                    </div>
                    <div class="match-grid" id="mobileScheduledContainer">
                        </div>
                </div>
    
                <div class="section-header">
                    <h2>Live Matches</h2>
                </div>
                <div class="match-grid" id="liveContainer">
                    </div>
            </section>
    
            <section id="featuredSection">
                <div class="section-header">
                    <h2>Featured Upcoming Matches</h2>
                </div>
                <div class="match-grid" id="featuredContainer">
                    </div>
            </section>
    
            <section id="upcomingSection">
                <div class="section-header">
                    <h2>Other Upcoming Matches</h2>
                </div>
                <div class="match-grid" id="upcomingContainer">
                    </div>
            </section>
    
            <section id="othersSection" style="display: none;">
                <div class="section-header">
                    <h2>Other Sports Events</h2>
                </div>
                <div class="match-grid" id="othersContainer">
                    </div>
            </section>
            
        </div>
        <div id="scheduleContent" style="display: none;">
            <h2 style="padding: 20px;">Schedule Page Content Placeholder</h2>
            <p style="padding: 0 20px;">This content will be shown when the 'Schedule' dock tab is active.</p>
        </div>
        <div id="accountContent" style="display: none;">
            <h2 style="padding: 20px;">Account Page Content Placeholder</h2>
            <p style="padding: 0 20px;">This content will be shown when the 'Account' dock tab is active.</p>
        </div>
        
    </div>
</div>

<div class="modal-overlay" id="matchModal">
<div class="modal-content">
<button class="modal-close" id="modalClose">&times;</button>
<div class="modal-header">
<h2 class="modal-title" id="modalMatchTitle">Match Title</h2>
<p class="modal-league" id="modalMatchLeague">League Name</p>
</div>
<div class="modal-details">
<div class="modal-detail-item">
<span class="modal-detail-label">Date & Time:</span>
<span class="modal-detail-value" id="modalMatchTime">Time Info</span>
</div>
<div class="modal-detail-item">
<span class="modal-detail-label">Venue:</span>
<span class="modal-detail-value" id="modalMatchVenue">Venue Info</span>
</div>
<div class="modal-detail-item">
<span class="modal-detail-label">Status:</span>
<span class="modal-detail-value" id="modalMatchStatus">Match Status</span>
</div>
<div class="modal-detail-item">
<span class="modal-detail-label">Broadcast:</span>
<span class="modal-detail-value" id="modalMatchBroadcast">Broadcast Info</span>
</div>
</div>
<div class="modal-actions">
<button class="modal-btn modal-btn-primary" id="modalWatchBtn">
<i class="fas fa-eye"></i> Watch Now
</button>
<button class="modal-btn modal-btn-secondary" id="modalReminderBtn">
<i class="far fa-bell"></i> Set Reminder
</button>
</div>
<div class="modal-cross-references" id="modalCrossReferences">
</div>
</div>
</div>

<div class="toast-notification" id="toastNotification">
<div class="toast-match" id="toastMatch">Match Starting Soon!</div>
<div class="toast-time" id="toastTime">Your reminder match is about to begin</div>
</div>

<footer>
<div class="container">
<div class="footer-content" id="footerLeagueLinks">
</div>
<p style="text-align: center; color: var(--text-secondary); font-size: 0.8rem; padding: 20px 0;">&copy; 2023 Vieus Sport. All rights reserved.</p>
</div>
</footer>

<div class="mobile-bottom-dock">
    <div class="dock-item active" data-target="homeContent">
        <i class="fas fa-home"></i>
        <span>Home</span>
    </div>
    <div class="dock-item" data-target="scheduleContent">
        <i class="far fa-calendar-alt"></i>
        <span>Schedule</span>
    </div>
    <div class="dock-item" data-target="accountContent">
        <i class="far fa-user"></i>
        <span>Account</span>
    </div>
</div>
<script>
// --- Configuration ---
const API_BASE_URL = 'https://vieus-sport-api.onrender.com/api'; // CONFIRMED RENDER API URL
const API_LIVE_FIXTURES = `${API_BASE_URL}/live_fixtures`;
const API_UPCOMING_FIXTURES = `${API_BASE_URL}/upcoming_fixtures`;
const API_HERO_BASE_URL = 'https://vieus-sport-api.onrender.com/api/hero-fixtures'; // CONFIRMED RENDER API URL

// Add request caching
let requestCache = {
Â  Â  live_fixtures: { data: null, timestamp: 0 },
Â  Â  upcoming_fixtures: { data: null, timestamp: 0 },
Â  Â  hero_football: { data: null, timestamp: 0 },
Â  Â  hero_others: { data: null, timestamp: 0 }
};

const CACHE_DURATION = 420000; // 7 minutes

// Cached fetch functions
async function fetchWithCache(url, cacheKey) {
Â  Â  const now = Date.now();
Â  Â  if (requestCache[cacheKey] && (now - requestCache[cacheKey].timestamp) < CACHE_DURATION) {
Â  Â  Â  Â  console.log(`Using cached data for ${cacheKey}`);
Â  Â  Â  Â  return requestCache[cacheKey].data;
Â  Â  }
Â  Â Â 
Â  Â  try {
Â  Â  Â  Â  console.log(`Fetching fresh data for ${cacheKey}`);
        // Applying the SSL Bypass logic here (since I cannot change runtime environment, this assumes a secure connection is handled by fetch/environment)
Â  Â  Â  Â  const response = await fetch(url); 
Â  Â  Â  Â  if (!response.ok) throw new Error('Network response was not ok');
Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  requestCache[cacheKey] = {
Â  Â  Â  Â  Â  Â  data: data.data || data,
Â  Â  Â  Â  Â  Â  timestamp: now
Â  Â  Â  Â  };
Â  Â  Â  Â  return requestCache[cacheKey].data;
Â  Â  } catch (error) {
Â  Â  Â  Â  console.error(`Fetch failed for ${cacheKey}:`, error);
Â  Â  Â  Â  return requestCache[cacheKey] ? requestCache[cacheKey].data : [];
Â  Â  }
}

// Updated fetch functions
async function fetchLiveFixtures() {
Â  Â  return await fetchWithCache(API_LIVE_FIXTURES, 'live_fixtures');
}

async function fetchUpcomingFixtures() {
Â  Â  return await fetchWithCache(API_UPCOMING_FIXTURES, 'upcoming_fixtures');
}

async function fetchHeroFixtures(sport) {
Â  Â  const cacheKey = sport === 'live' ? 'hero_football' : 'hero_others';
Â  Â  return await fetchWithCache(`${API_HERO_BASE_URL}/${sport}`, cacheKey);
}

// Intelligent League Prioritization
const LEAGUE_PRIORITY = {
Â  Â  // Champions League gets highest priority on match days
Â  Â  'champions league': 100,
Â  Â  'europa league': 90,
Â  Â  'conference league': 85,
Â  Â Â 
Â  Â  // Major domestic leagues
Â  Â  'premier league': 80,
Â  Â  'laliga': 75,
Â  Â  'bundesliga': 70,
Â  Â  'serie a': 65,
Â  Â  'ligue 1': 60,
Â  Â Â 
Â  Â  // Major tournaments
Â  Â  'world cup': 95,
Â  Â  'euro': 85,
Â  Â  'copa libertadores': 70,
Â  Â Â 
Â  Â  // Other important competitions
Â  Â  'fa cup': 55,
Â  Â  'uefa nations league': 50,
Â  Â  'eredivisie': 45,
Â  Â Â 
Â  Â  // Default priority for other leagues
Â  Â  'default': 10
};

// Get current day to determine if it's Champions League day
function getCurrentDayPriority() {
Â  Â  const today = new Date().getDay(); // 0 = Sunday, 1 = Monday, etc.
Â  Â  const isChampionsLeagueDay = today === 2 || today === 3; // Tuesday or Wednesday
Â  Â Â 
Â  Â  return {
Â  Â  Â  Â  isChampionsLeagueDay,
Â  Â  Â  Â  dayBonus: isChampionsLeagueDay ? 50 : 0 // Extra priority boost on CL days
Â  Â  };
}

// Smart fixture sorting based on league importance and current day
function sortFixturesByPriority(fixtures) {
Â  Â  const dayInfo = getCurrentDayPriority();
Â  Â Â 
Â  Â  return fixtures.sort((a, b) => {
Â  Â  Â  Â  const leagueA = (a.league || '').toLowerCase();
Â  Â  Â  Â  const leagueB = (b.league || '').toLowerCase();
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Get priority scores
Â  Â  Â  Â  const priorityA = LEAGUE_PRIORITY[leagueA] || LEAGUE_PRIORITY.default;
Â  Â  Â  Â  const priorityB = LEAGUE_PRIORITY[leagueB] || LEAGUE_PRIORITY.default;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Apply day-based bonus (Champions League gets extra boost on match days)
Â  Â  Â  Â  const finalPriorityA = priorityA + (leagueA.includes('champions') ? dayInfo.dayBonus : 0);
Â  Â  Â  Â  const finalPriorityB = priorityB + (leagueB.includes('champions') ? dayInfo.dayBonus : 0);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Higher priority first
Â  Â  Â  Â  return finalPriorityB - finalPriorityA;
Â  Â  });
}

// Filter featured matches (top 6 most important upcoming matches)
function getFeaturedMatches(upcomingFixtures) {
Â  Â  const sorted = sortFixturesByPriority(upcomingFixtures);
Â  Â  return sorted.slice(0, 6); // Top 6 most important matches
}

// Sport configurations
const SPORT_BACKGROUNDS = {
Â  Â  'live': 'url(https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=2500&h=300&fit=crop&crop=top&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)',Â 
Â  Â  'others': 'url(https://images.unsplash.com/photo-1456524314798-8c1d533519ec?q=80&w=2500&h=300&fit=crop&crop=top&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)'
};

const SPORTS = {
Â  Â  'live': { name: 'Live', icon: 'fas fa-broadcast-tower' },
Â  Â  'others': { name: 'Other Sports', icon: 'fas fa-ellipsis-h' }
};

// Global variables
let currentSport = 'live';
let allFixtures = [];
let liveFixtures = [];
let upcomingFixtures = [];
let autoSlideInterval;
let fixtureIndexHistory = [];Â 
let currentModalFixture = null;
let userReminders = JSON.parse(localStorage.getItem('vieusReminders')) || [];
let currentMobileFilter = 'live'; // Track mobile filter state

// DOM elements
const desktopSportTabs = document.querySelectorAll('.sport-tab');
const sportTitleElement = document.getElementById('sportTitle');
const footerLeagueLinks = document.getElementById('footerLeagueLinks');
const liveSection = document.getElementById('liveSection');
const featuredSection = document.getElementById('featuredSection');
const upcomingSection = document.getElementById('upcomingSection');
const othersSection = document.getElementById('othersSection');
const liveContainer = document.getElementById('liveContainer');
const featuredContainer = document.getElementById('featuredContainer');
const upcomingContainer = document.getElementById('upcomingContainer');
const othersContainer = document.getElementById('othersContainer');
const heroCarouselContainer = document.getElementById('heroCarousel');
const heroCarouselSection = document.querySelector('.hero-carousel-section');
const searchInput = document.getElementById('searchInputDesktop');
const searchResults = document.getElementById('searchResults');
const matchModal = document.getElementById('matchModal');
const modalClose = document.getElementById('modalClose');
const modalMatchTitle = document.getElementById('modalMatchTitle');
const modalMatchLeague = document.getElementById('modalMatchLeague');
const modalMatchTime = document.getElementById('modalMatchTime');
const modalMatchVenue = document.getElementById('modalMatchVenue');
const modalMatchStatus = document.getElementById('modalMatchStatus');
const modalMatchBroadcast = document.getElementById('modalMatchBroadcast');
const modalWatchBtn = document.getElementById('modalWatchBtn');
const modalReminderBtn = document.getElementById('modalReminderBtn');
const notificationBtn = document.getElementById('notificationBtn');
const notificationBadge = document.getElementById('notificationBadge');
const notificationPanel = document.getElementById('notificationPanel');
const notificationPanelClose = document.getElementById('notificationPanelClose');
const notificationList = document.getElementById('notificationList');
const toastNotification = document.getElementById('toastNotification');
const toastMatch = document.getElementById('toastMatch');
const toastTime = document.getElementById('toastTime');

// Mobile filter elements
const mobileFilterTitle = document.getElementById('mobileFilterTitle');
const mobileLiveContainer = document.getElementById('mobileLiveContainer');
const mobileScheduledContainer = document.getElementById('mobileScheduledContainer');
const mobileLiveSection = document.getElementById('mobileLiveSection');
const mobileScheduledSection = document.getElementById('mobileScheduledSection');

// Utility Functions
function navigateToSchedule(matchContext) {
Â  Â  const sport = matchContext?.sport || currentSport;
Â  Â  const filter = matchContext?.filter || 'all';
Â  Â  const league = matchContext?.league ? `&league=${encodeURIComponent(matchContext.league)}` : '';
Â  Â  window.location.href = `schedule.html?sport=${sport}&filter=${filter}${league}`;
}

function getMatchStatus(fixture) {
Â  Â  if (fixture.stream_url && fixture.stream_url !== 'N/A' && fixture.stream_url !== '#') {
Â  Â  Â  Â  return 'live';
Â  Â  } else if (fixture.status && fixture.status.toLowerCase().includes('finished')) {
Â  Â  Â  Â  return 'finished';
Â  Â  } else {
Â  Â  Â  Â  return 'upcoming';
Â  Â  }
}

function adjustTimezoneOffset(fixtures, offsetHours) {
Â  Â  if (!fixtures || fixtures.length === 0) return [];

Â  Â  return fixtures.map(fixture => {
Â  Â  Â  Â  if (!fixture.time || !/^\d{2}:\d{2}$/.test(fixture.time)) {
Â  Â  Â  Â  Â  Â  return fixture;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const dateString = now.toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  const dateTimeString = `${dateString}T${fixture.time}:00`;
Â  Â  Â  Â  Â  Â  let fixtureDate = new Date(dateTimeString);

Â  Â  Â  Â  Â  Â  if (isNaN(fixtureDate.getTime())) {
Â  Â  Â  Â  Â  Â  Â  Â  return fixture;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  fixtureDate.setHours(fixtureDate.getHours() + offsetHours);
Â  Â  Â  Â  Â  Â  const adjustedTime = fixtureDate.toLocaleTimeString('en-GB', {Â 
Â  Â  Â  Â  Â  Â  Â  Â  hour: '2-digit',Â 
Â  Â  Â  Â  Â  Â  Â  Â  minute: '2-digit',
Â  Â  Â  Â  Â  Â  Â  Â  hour12: false
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  Â  ...fixture,
Â  Â  Â  Â  Â  Â  Â  Â  time: adjustedTime
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error('Error adjusting timezone offset:', e);
Â  Â  Â  Â  Â  Â  return fixture;
Â  Â  Â  Â  }
Â  Â  });
}

// Function to switch mobile filter (for inline filter tabs, not bottom dock)
function switchMobileFilter(filter) {
Â  Â  console.log('switchMobileFilter called with:', filter);
Â  Â  currentMobileFilter = filter;
Â  Â Â 
Â  Â  // Update active tab
Â  Â  document.querySelectorAll('.sport-tab-inline').forEach(tab => {
Â  Â  Â  Â  tab.classList.remove('active');
Â  Â  Â  Â  if (tab.getAttribute('data-filter') === filter) {
Â  Â  Â  Â  Â  Â  tab.classList.add('active');
Â  Â  Â  Â  }
Â  Â  });
Â  Â Â 
Â  Â  // Update filter title
Â  Â  if (filter === 'live') {
Â  Â  Â  Â  console.log('Showing live matches');
Â  Â  Â  Â  mobileFilterTitle.textContent = 'Live Matches';
Â  Â  Â  Â  // Show live section, hide scheduled
Â  Â  Â  Â  mobileLiveSection.style.display = 'block';
Â  Â  Â  Â  mobileScheduledSection.style.display = 'none';
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Render all live games
Â  Â  Â  Â  renderMatches(mobileLiveContainer, liveFixtures, true);
Â  Â  } else if (filter === 'scheduled') {
Â  Â  Â  Â  console.log('Showing scheduled matches');
Â  Â  Â  Â  mobileFilterTitle.textContent = 'Scheduled Matches';
Â  Â  Â  Â  // Show scheduled section, hide live
Â  Â  Â  Â  mobileLiveSection.style.display = 'none';
Â  Â  Â  Â  mobileScheduledSection.style.display = 'block';
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Render all upcoming fixtures
Â  Â  Â  Â  renderMatches(mobileScheduledContainer, upcomingFixtures, false);
Â  Â  }
}

// Setup mobile filter tabs
function setupMobileFilterTabs() {
Â  Â  const mobileTabs = document.querySelectorAll('.sport-tab-inline');
Â  Â  mobileTabs.forEach(tab => {
Â  Â  Â  Â  tab.addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  const filter = this.getAttribute('data-filter');
Â  Â  Â  Â  Â  Â  console.log('Mobile filter clicked:', filter);
Â  Â  Â  Â  Â  Â  switchMobileFilter(filter);
Â  Â  Â  Â  });
Â  Â  });
}

// ---------------------------------------------------------------------
// ðŸš€ FIX: MOBILE DOCK TAB SWITCHING LOGIC
// ---------------------------------------------------------------------

/**
 * Handles the activation of mobile bottom dock tabs and switches the main content view.
 */
function activateMobileTab(targetId) {
    // List of main content IDs
    const contentIds = ['homeContent', 'scheduleContent', 'accountContent']; 
    const dockItems = document.querySelectorAll('.mobile-bottom-dock .dock-item');

    // 1. Deactivate all dock items
    dockItems.forEach(item => item.classList.remove('active'));

    // 2. Hide all relevant main content sections
    contentIds.forEach(id => {
        const section = document.getElementById(id);
        if (section) {
            section.style.display = 'none';
        }
    });

    // 3. Show the target content
    const targetElement = document.getElementById(targetId);
    if (targetElement) {
        targetElement.style.display = 'block';
        console.log(`Switched to mobile tab: ${targetId}`);
    } else {
        console.warn(`Mobile tab target ID not found: #${targetId}.`);
        return;
    }

    // 4. Find and activate the clicked dock item
    const activeDockItem = document.querySelector(`.mobile-bottom-dock .dock-item[data-target="${targetId}"]`);
    if (activeDockItem) {
        activeDockItem.classList.add('active');
    }
    
    // 5. Run switchSport when returning to Home/Live content
    if (targetId === 'homeContent') {
        switchSport('live');
    }
}


// Event Listeners
document.addEventListener('DOMContentLoaded', function() {
Â  Â  setupEventListeners();
Â  Â  switchSport(currentSport);
Â  Â  updateNotificationBadge();
Â  Â  renderNotificationList();
Â  Â  setupMobileFilterTabs(); // Initialize mobile inline tabs
    
    // ðŸš€ FIX: Initialize the mobile view to the 'Home' tab content on load
    if (window.innerWidth <= 767) {
        activateMobileTab('homeContent'); 
    }
});

function setupEventListeners() {
Â  Â  // Sport tabs (desktop)
Â  Â  desktopSportTabs.forEach(tab => {
Â  Â  Â  Â  tab.addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  const sport = this.getAttribute('data-sport');
Â  Â  Â  Â  Â  Â  switchSport(sport);
Â  Â  Â  Â  Â  Â  desktopSportTabs.forEach(t => t.classList.remove('active'));
Â  Â  Â  Â  Â  Â  this.classList.add('active');
Â  Â  Â  Â  });
Â  Â  });

Â  Â  // Search functionality
Â  Â  searchInput.addEventListener('input', handleSearch);
Â  Â  searchInput.addEventListener('focus', function() {
Â  Â  Â  Â  if (searchInput.value.length > 0) {
Â  Â  Â  Â  Â  Â  searchResults.style.display = 'block';
Â  Â  Â  Â  }
Â  Â  });
Â  Â Â 
Â  Â  document.addEventListener('click', function(e) {
Â  Â  Â  Â  if (!e.target.closest('.search-box')) {
Â  Â  Â  Â  Â  Â  searchResults.style.display = 'none';
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // Modal functionality
Â  Â  modalClose.addEventListener('click', closeModal);
Â  Â  matchModal.addEventListener('click', function(e) {
Â  Â  Â  Â  if (e.target === matchModal) {
Â  Â  Â  Â  Â  Â  closeModal();
Â  Â  Â  Â  }
Â  Â  });

Â  Â  modalWatchBtn.addEventListener('click', function() {
Â  Â  Â  Â  if (currentModalFixture && currentModalFixture.stream_url &&Â 
Â  Â  Â  Â  Â  Â  currentModalFixture.stream_url !== 'N/A' && currentModalFixture.stream_url !== '#') {
Â  Â  Â  Â  Â  Â  window.open(currentModalFixture.stream_url, '_blank');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  alert('No stream available for this match yet.');
Â  Â  Â  Â  }
Â  Â  });

Â  Â  modalReminderBtn.addEventListener('click', function() {
Â  Â  Â  Â  if (currentModalFixture) {
Â  Â  Â  Â  Â  Â  setReminder(currentModalFixture);
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // Notification functionality
Â  Â  notificationBtn.addEventListener('click', toggleNotificationPanel);
Â  Â  notificationPanelClose.addEventListener('click', closeNotificationPanel);
Â  Â 
    // ðŸš€ FIX: Primary Event Listener for Mobile Dock Tabs
    const mobileDock = document.querySelector('.mobile-bottom-dock');
    if (mobileDock) {
        mobileDock.addEventListener('click', function(e) {
            const dockItem = e.target.closest('.dock-item');
            if (dockItem && dockItem.dataset.target) {
                activateMobileTab(dockItem.dataset.target);
            }
        });
    }
Â  Â Â 
Â  Â  // Backup click handler for mobile inline tabs
Â  Â  document.addEventListener('click', function(e) {
Â  Â  Â  Â  if (e.target.closest('.sport-tab-inline')) {
Â  Â  Â  Â  Â  Â  const tab = e.target.closest('.sport-tab-inline');
Â  Â  Â  Â  Â  Â  const filter = tab.getAttribute('data-filter');
Â  Â  Â  Â  Â  Â  if (filter) {
Â  Â  Â  Â  Â  Â  Â  Â  switchMobileFilter(filter);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  });
}

// Section Visibility Management
function showLiveSections() {
Â  Â  liveSection.style.display = 'block';
Â  Â  featuredSection.style.display = 'block';
Â  Â  upcomingSection.style.display = 'block';
Â  Â  othersSection.style.display = 'none';
Â  Â  sportTitleElement.textContent = 'Live';
}

function showOthersSection() {
Â  Â  liveSection.style.display = 'none';
Â  Â  featuredSection.style.display = 'none';
Â  Â  upcomingSection.style.display = 'none';
Â  Â  othersSection.style.display = 'block';
Â  Â  sportTitleElement.textContent = 'Other Sports';
}

// Carousel Logic
function renderHeroCarousel(fixtures) {
Â  Â  heroCarouselContainer.innerHTML = '';
Â  Â  allFixtures = fixtures;

Â  Â  const sportKey = currentSport || 'live';
Â  Â  const backgroundUrl = SPORT_BACKGROUNDS[sportKey] || SPORT_BACKGROUNDS['live'];

Â  Â  let fixtureToDisplay = fixtures.length > 0 ? fixtures[0] : null;

Â  Â  heroCarouselContainer.innerHTML = `
Â  Â  Â  Â  <div class="hero-card" id="dynamicHeroCard" style="background-image: ${backgroundUrl};">
Â  Â  Â  Â  </div>
Â  Â  `;

Â  Â  const dynamicCard = document.getElementById('dynamicHeroCard');

Â  Â  if (!fixtureToDisplay) {
Â  Â  Â  Â  dynamicCard.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="hero-content">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="hero-league-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hero-league-name">Upcoming Matches</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="hero-title">No Events Available</h1>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="hero-subtitle">Check back soon for exciting upcoming ${SPORTS[currentSport].name} events.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  const match = fixtureToDisplay;
Â  Â  const leagueLogo = match.logo_url || 'https://via.placeholder.com/30/0f3460/ffffff?text=L';
Â  Â  const leagueName = match.league || 'Unknown League';

Â  Â  heroCarouselSection.style.backgroundImage = backgroundUrl;
Â  Â  dynamicCard.innerHTML = `
Â  Â  Â  Â  <div class="hero-content">
Â  Â  Â  Â  Â  Â  <div class="hero-league-info">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="${leagueLogo}" alt="${leagueName} Logo" class="hero-league-logo" onerror="this.onerror=null; this.src='https://via.placeholder.com/30/0f3460/ffffff?text=L';">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hero-league-name">${leagueName} - ${match.time}</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <h1 class="hero-title">${match.fixture}</h1>
Â  Â  Â  Â  Â  Â  <p class="hero-subtitle">Highest Priority Match (${leagueName})</p>
Â  Â  Â  Â  Â  Â  <button class="btn btn-primary hero-btn view-details-btn" data-fixture='${JSON.stringify(match).replace(/'/g, "&#39;")}'>
Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-eye"></i> View Details
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  `;

Â  Â  document.querySelector('.view-details-btn').addEventListener('click', function() {
Â  Â  Â  Â  const fixtureData = this.getAttribute('data-fixture');
Â  Â  Â  Â  const fixture = JSON.parse(fixtureData.replace(/&#39;/g, "'"));
Â  Â  Â  Â  openModal(fixture);
Â  Â  });

Â  Â  if (fixtures.length > 1) {
Â  Â  Â  Â  fixtureIndexHistory = [0];
Â  Â  Â  Â  startAutoSlide(fixtures);Â 
Â  Â  } else {
Â  Â  Â  Â  clearInterval(autoSlideInterval);Â 
Â  Â  }
}

function goToRandomSlide(fixtures) {
Â  Â  if (fixtures.length === 0) return;
Â  Â  let nextIndex;

Â  Â  if (fixtureIndexHistory.length === fixtures.length) {
Â  Â  Â  Â  fixtureIndexHistory = [];
Â  Â  }

Â  Â  do {
Â  Â  Â  Â  nextIndex = Math.floor(Math.random() * fixtures.length);
Â  Â  } while (fixtureIndexHistory.includes(nextIndex));Â 

Â  Â  fixtureIndexHistory.push(nextIndex);
Â  Â  const match = fixtures[nextIndex];

Â  Â  const dynamicCard = document.getElementById('dynamicHeroCard');
Â  Â  const sportKey = currentSport || 'live';
Â  Â  const backgroundUrl = SPORT_BACKGROUNDS[sportKey] || SPORT_BACKGROUNDS['live'];
Â  Â  const leagueLogo = match.logo_url || 'https://via.placeholder.com/30/0f3460/ffffff?text=L';
Â  Â  const leagueName = match.league || 'Unknown League';

Â  Â  heroCarouselSection.style.backgroundImage = backgroundUrl;
Â  Â  dynamicCard.innerHTML = `
Â  Â  Â  Â  <div class="hero-content">
Â  Â  Â  Â  Â  Â  <div class="hero-league-info">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="${leagueLogo}" alt="${leagueName} Logo" class="hero-league-logo" onerror="this.onerror=null; this.src='https://via.placeholder.com/30/0f3460/ffffff?text=L';">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hero-league-name">${leagueName} - ${match.time}</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <h1 class="hero-title">${match.fixture}</h1>
Â  Â  Â  Â  Â  Â  <p class="hero-subtitle">Upcoming Match</p>
Â  Â  Â  Â  Â  Â  <button class="btn btn-primary hero-btn view-details-btn" data-fixture='${JSON.stringify(match).replace(/'/g, "&#39;")}'>
Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-eye"></i> View Details
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  `;

Â  Â  document.querySelector('.view-details-btn').addEventListener('click', function() {
Â  Â  Â  Â  const fixtureData = this.getAttribute('data-fixture');
Â  Â  Â  Â  const fixture = JSON.parse(fixtureData.replace(/&#39;/g, "'"));
Â  Â  Â  Â  openModal(fixture);
Â  Â  });
}

function startAutoSlide(fixtures) {
Â  Â  clearInterval(autoSlideInterval);Â 
Â  Â  if (fixtures.length > 1) {
Â  Â  Â  Â  autoSlideInterval = setInterval(() => goToRandomSlide(fixtures), 6000);Â 
Â  Â  }
}

// Match Grid Renderers with white cards for live matches
function renderMatches(container, fixtures, isLive = false) {
Â  Â  container.innerHTML = '';Â 

Â  Â  if (fixtures.length === 0) {
Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  <div style="grid-column: 1 / -1; text-align: center; padding: 30px; color: var(--text-secondary);">
Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-search-minus"></i> No ${isLive ? 'live' : 'scheduled'} matches available right now.
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  const uniqueFixtures = [];
Â  Â  const seenFixtures = new Set();

Â  Â  fixtures.forEach(match => {
Â  Â  Â  Â  const key = `${match.fixture}-${match.time}-${match.league}`;
Â  Â  Â  Â  if (!seenFixtures.has(key)) {
Â  Â  Â  Â  Â  Â  seenFixtures.add(key);
Â  Â  Â  Â  Â  Â  uniqueFixtures.push(match);
Â  Â  Â  Â  }
Â  Â  });

Â  Â  uniqueFixtures.forEach(match => {
Â  Â  Â  Â  const streamUrl = match.stream_url && match.stream_url !== 'N/A' ? match.stream_url : '#';
Â  Â  Â  Â  const isActuallyLive = isLive && streamUrl !== '#';
Â  Â  Â  Â  const buttonText = isActuallyLive ? 'Watch Live' : 'View Details';
Â  Â  Â  Â  const buttonBackground = isActuallyLive ? 'var(--highlight)' : 'var(--accent)';
Â  Â  Â  Â  const icon = isActuallyLive ? 'fas fa-eye' : 'fas fa-info-circle';
Â  Â  Â  Â  const logoSrc = (match.logo_url && match.logo_url !== 'N/A') ? match.logo_url : 'https://via.placeholder.com/40/e94560/ffffff?text=L';

Â  Â  Â  Â  const cardLink = document.createElement('div');
Â  Â  Â  Â  cardLink.classList.add('match-card-link');
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Add class for white background if it's a live match
Â  Â  Â  Â  if (isActuallyLive) {
Â  Â  Â  Â  Â  Â  cardLink.classList.add('live-match');
Â  Â  Â  Â  } else if (!isLive && currentSport === 'live') {
Â  Â  Â  Â  Â  Â  cardLink.classList.add('scheduled-match');
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  cardLink.addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  openModal(match);
Â  Â  Â  Â  });
        
        // Part C content for innerHTML
Â  Â  Â  Â  cardLink.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="match-card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="match-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="match-logo">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${logoSrc}" alt="${match.league} Logo" onerror="this.onerror=null; this.src='https://via.placeholder.com/40/e94560/ffffff?text=L';">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>${match.fixture}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${isActuallyLive ? 'var(--scheduled-secondary)' : 'var(--highlight)'};">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${match.league}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${isActuallyLive ? 'var(--scheduled-secondary)' : 'var(--text-secondary)'};">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${match.time}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="stream-btn-visual"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  style="background-color: ${buttonBackground};">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="${icon}"></i> ${buttonText}
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  container.appendChild(cardLink);
Â  Â  });
}

// Footer Renderer
async function renderFooterLeagues(sport) {
Â  Â  const fixtures = await fetchHeroFixtures(sport);
Â  Â  const uniqueLeagues = new Map();

Â  Â  fixtures.forEach(match => {
Â  Â  Â  Â  const league = match.league;
Â  Â  Â  Â  if (league && league !== 'N/A') {
Â  Â  Â  Â  Â  Â  uniqueLeagues.set(league.toLowerCase(), league);Â 
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // Sort leagues by priority
Â  Â  const sortedLeagues = Array.from(uniqueLeagues.values()).sort((a, b) => {
Â  Â  Â  Â  const priorityA = LEAGUE_PRIORITY[a.toLowerCase()] || LEAGUE_PRIORITY.default;
Â  Â  Â  Â  const priorityB = LEAGUE_PRIORITY[b.toLowerCase()] || LEAGUE_PRIORITY.default;
Â  Â  Â  Â  return priorityB - priorityA;
Â  Â  });

Â  Â  footerLeagueLinks.innerHTML = '';

Â  Â  if (sortedLeagues.length === 0) {
Â  Â  Â  Â  footerLeagueLinks.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="footer-section" style="flex: 1 1 100%;">
Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: var(--text-secondary); text-align: center;">No featured leagues found for ${SPORTS[sport].name}.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  const numLeagues = sortedLeagues.length;
Â  Â  const colSize = Math.ceil(numLeagues / 3);Â 

Â  Â  for (let i = 0; i < 3; i++) {
Â  Â  Â  Â  const start = i * colSize;
Â  Â  Â  Â  const end = start + colSize;
Â  Â  Â  Â  const leaguesSlice = sortedLeagues.slice(start, end);
Â  Â  Â  Â  if (leaguesSlice.length > 0) {
Â  Â  Â  Â  Â  Â  const section = document.createElement('div');
Â  Â  Â  Â  Â  Â  section.classList.add('footer-section');
Â  Â  Â  Â  Â  Â  section.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <h4>${SPORTS[sport].name} Leagues</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${leaguesSlice.map(league => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" onclick="navigateToSchedule({sport: '${sport}', league: '${league}'}); return false;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${league}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  footerLeagueLinks.appendChild(section);
Â  Â  Â  Â  }
Â  Â  }
}

// Search Functionality
function handleSearch() {
Â  Â  const searchTerm = searchInput.value.toLowerCase().trim();
Â  Â  if (searchTerm.length === 0) {
Â  Â  Â  Â  searchResults.style.display = 'none';
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  // Combine all fixtures for search based on current sport
Â  Â  let searchFixtures = [];
Â  Â  if (currentSport === 'live') {
Â  Â  Â  Â  searchFixtures = [...liveFixtures, ...upcomingFixtures];
Â  Â  } else {
Â  Â  Â  Â  searchFixtures = allFixtures;
Â  Â  }

Â  Â  // Filter fixtures based on search term
Â  Â  const filteredFixtures = searchFixtures.filter(fixture => {
Â  Â  Â  Â  const fixtureName = fixture.fixture ? fixture.fixture.toLowerCase() : '';
Â  Â  Â  Â  const leagueName = fixture.league ? fixture.league.toLowerCase() : '';
Â  Â  Â  Â  const teamHome = fixture.team_home ? fixture.team_home.toLowerCase() : '';
Â  Â  Â  Â  const teamAway = fixture.team_away ? fixture.team_away.toLowerCase() : '';
Â  Â  Â  Â  return fixtureName.includes(searchTerm) ||Â 
Â  Â  Â  Â  Â  Â  Â  Â leagueName.includes(searchTerm) ||Â 
Â  Â  Â  Â  Â  Â  Â  Â teamHome.includes(searchTerm) ||Â 
Â  Â  Â  Â  Â  Â  Â  Â teamAway.includes(searchTerm);
Â  Â  });

Â  Â  // Remove duplicates
Â  Â  const uniqueFixtures = [];
Â  Â  const seenFixtures = new Set();
Â  Â  filteredFixtures.forEach(fixture => {
Â  Â  Â  Â  const key = `${fixture.fixture}-${fixture.time}-${fixture.league}`;
Â  Â  Â  Â  if (!seenFixtures.has(key)) {
Â  Â  Â  Â  Â  Â  seenFixtures.add(key);
Â  Â  Â  Â  Â  Â  uniqueFixtures.push(fixture);
Â  Â  Â  Â  }
Â  Â  });

Â  Â  displaySearchResults(uniqueFixtures);
}

function displaySearchResults(results) {
Â  Â  if (results.length === 0) {
Â  Â  Â  Â  searchResults.innerHTML = '<div class="search-result-item">No matches found</div>';
Â  Â  } else {
Â  Â  Â  Â  searchResults.innerHTML = results.map(fixture => {
Â  Â  Â  Â  Â  Â  let sportCategory = 'Live';
Â  Â  Â  Â  Â  Â  if (currentSport === 'others') {
Â  Â  Â  Â  Â  Â  Â  Â  sportCategory = 'Other Sports';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const matchStatus = getMatchStatus(fixture);
Â  Â  Â  Â  Â  Â  const isLive = matchStatus === 'live';
Â  Â  Â  Â  Â  Â  const pageContext = isLive ? 'Live' : 'Scheduled';

Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="search-result-item" data-fixture='${JSON.stringify(fixture).replace(/'/g, "&#39;")}'>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="match-name">${fixture.fixture} <span class="match-sport">${sportCategory}</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="match-league">${fixture.league} â€¢ ${fixture.time} â€¢ ${pageContext}</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }).join('');

Â  Â  Â  Â  document.querySelectorAll('.search-result-item').forEach(item => {
Â  Â  Â  Â  Â  Â  item.addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  Â  Â  const fixtureData = this.getAttribute('data-fixture');
Â  Â  Â  Â  Â  Â  Â  Â  const fixture = JSON.parse(fixtureData.replace(/&#39;/g, "'"));
Â  Â  Â  Â  Â  Â  Â  Â  openModal(fixture);
Â  Â  Â  Â  Â  Â  Â  Â  searchResults.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  searchInput.value = '';
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  }
Â  Â  searchResults.style.display = 'block';
}

// Main Sport Switching Function
window.switchSport = async function(sport) {
Â  Â  currentSport = sport;
Â  Â  sportTitleElement.textContent = SPORTS[sport].name;

Â  Â  // Update section visibility
Â  Â  if (sport === 'live') {
Â  Â  Â  Â  showLiveSections();
Â  Â  } else {
Â  Â  Â  Â  showOthersSection();
Â  Â  Â  Â  // Hide mobile filter when in 'others' sport
Â  Â  Â  Â  document.querySelector('.mobile-filter-section').style.display = 'none';
Â  Â  Â  Â  mobileLiveSection.style.display = 'none';
Â  Â  Â  Â  mobileScheduledSection.style.display = 'none';
Â  Â  Â  Â  sportTitleElement.textContent = 'Other Sports';
Â  Â  Â  Â  return; // Skip rest for 'others' sport
Â  Â  }

Â  Â  // Show loading states
Â  Â  const backgroundUrl = SPORT_BACKGROUNDS[sport] || SPORT_BACKGROUNDS['live'];
Â  Â  heroCarouselSection.style.backgroundImage = backgroundUrl;
Â  Â  heroCarouselSection.style.backgroundSize = 'cover';
Â  Â  heroCarouselSection.style.backgroundPosition = 'center';

Â  Â  heroCarouselContainer.innerHTML = `
Â  Â  Â  Â  <div class="hero-card" style="background-image: ${backgroundUrl};">
Â  Â  Â  Â  Â  Â  <div class="hero-content" style="text-align: center;">
Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-spinner fa-spin fa-2x" style="color: var(--highlight);"></i>
Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="hero-title" style="margin-top: 15px;">Loading Upcoming Events...</h1>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  `;

Â  Â  if (sport === 'live') {
Â  Â  Â  Â  liveContainer.innerHTML = `<p style="grid-column: 1 / -1; text-align: center; padding: 30px; color: var(--text-secondary);"><i class="fas fa-spinner fa-spin"></i> Loading Live Matches...</p>`;
Â  Â  Â  Â  featuredContainer.innerHTML = `<p style="grid-column: 1 / -1; text-align: center; padding: 30px; color: var(--text-secondary);"><i class="fas fa-spinner fa-spin"></i> Loading Featured Matches...</p>`;
Â  Â  Â  Â  upcomingContainer.innerHTML = `<p style="grid-column: 1 / -1; text-align: center; padding: 30px; color: var(--text-secondary);"><i class="fas fa-spinner fa-spin"></i> Loading Upcoming Matches...</p>`;
Â  Â  } else {
Â  Â  Â  Â  othersContainer.innerHTML = `<p style="grid-column: 1 / -1; text-align: center; padding: 30px; color: var(--text-secondary);"><i class="fas fa-spinner fa-spin"></i> Loading Other Sports...</p>`;
Â  Â  }

Â  Â  footerLeagueLinks.innerHTML = `<p style="flex: 1 1 100%; color: var(--text-secondary); text-align: center;">Loading featured leagues...</p>`;

Â  Â  // Fetch and render data based on sport
Â  Â  if (sport === 'live') {
Â  Â  Â  Â  const [fetchedHeroFixtures, fetchedLive, fetchedUpcoming] = await Promise.all([
Â  Â  Â  Â  Â  Â  fetchHeroFixtures(sport),
Â  Â  Â  Â  Â  Â  fetchLiveFixtures(),
Â  Â  Â  Â  Â  Â  fetchUpcomingFixtures()
Â  Â  Â  Â  ]);

Â  Â  Â  Â  // Adjust timezone
Â  Â  Â  Â  const heroFixtures = adjustTimezoneOffset(fetchedHeroFixtures, -1);
Â  Â  Â  Â  const liveData = adjustTimezoneOffset(fetchedLive, -1);
Â  Â  Â  Â  const upcomingData = adjustTimezoneOffset(fetchedUpcoming, -1);

Â  Â  Â  Â  // Store for search and mobile filtering
Â  Â  Â  Â  liveFixtures = liveData;
Â  Â  Â  Â  upcomingFixtures = upcomingData;

Â  Â  Â  Â  // Get featured matches (intelligently prioritized)
Â  Â  Â  Â  const featuredMatches = getFeaturedMatches(upcomingData);

Â  Â  Â  Â  renderHeroCarousel(heroFixtures);
Â  Â  Â  Â  renderMatches(liveContainer, liveData, true);
Â  Â  Â  Â  renderMatches(featuredContainer, featuredMatches, false);
Â  Â  Â  Â  renderMatches(upcomingContainer, upcomingData, false);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Also render for mobile tabs
Â  Â  Â  Â  renderMatches(mobileLiveContainer, liveData, true);
Â  Â  Â  Â  renderMatches(mobileScheduledContainer, upcomingData, false);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Set up initial mobile filter state
Â  Â  Â  Â  if (window.innerWidth < 768) {
Â  Â  Â  Â  Â  Â  switchMobileFilter('live');
Â  Â  Â  Â  Â  Â  document.querySelector('.mobile-filter-section').style.display = 'block';
Â  Â  Â  Â  Â  Â  // Make sure mobile sections are visible
Â  Â  Â  Â  Â  Â  mobileLiveSection.style.display = 'block';
Â  Â  Â  Â  Â  Â  mobileScheduledSection.style.display = 'none';
Â  Â  Â  Â  }
Â  Â  } else {
Â  Â  Â  Â  const [fetchedHeroFixtures, fetchedUpcoming] = await Promise.all([
Â  Â  Â  Â  Â  Â  fetchHeroFixtures(sport),
Â  Â  Â  Â  Â  Â  fetchUpcomingFixtures()
Â  Â  Â  Â  ]);

Â  Â  Â  Â  // Adjust timezone
Â  Â  Â  Â  const heroFixtures = adjustTimezoneOffset(fetchedHeroFixtures, -1);
Â  Â  Â  Â  const upcomingData = adjustTimezoneOffset(fetchedUpcoming, -1);

Â  Â  Â  Â  // Store for search
Â  Â  Â  Â  allFixtures = upcomingData;

Â  Â  Â  Â  renderHeroCarousel(heroFixtures);
Â  Â  Â  Â  renderMatches(othersContainer, upcomingData, false);
Â  Â  }

Â  Â  // Render footer leagues
Â  Â  await renderFooterLeagues(sport);
}

// Notification and Modal FunctionsÂ 
function toggleNotificationPanel() {
Â  Â  notificationPanel.classList.toggle('active');
}

function closeNotificationPanel() {
Â  Â  notificationPanel.classList.remove('active');
}

function updateNotificationBadge() {
Â  Â  const count = userReminders.length;
Â  Â  notificationBadge.textContent = count;
Â  Â  if (count > 0) {
Â  Â  Â  Â  notificationBadge.style.display = 'flex';
Â  Â  } else {
Â  Â  Â  Â  notificationBadge.style.display = 'none';
Â  Â  }
}

function renderNotificationList() {
Â  Â  if (userReminders.length === 0) {
Â  Â  Â  Â  notificationList.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="notification-item">
Â  Â  Â  Â  Â  Â  Â  Â  <p>No reminders set yet. Set reminders for matches you don't want to miss!</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  return;
Â  Â  }
Â  Â  notificationList.innerHTML = userReminders.map((reminder, index) => {
Â  Â  Â  Â  const matchStatus = getMatchStatus(reminder);
Â  Â  Â  Â  const isLive = matchStatus === 'live';
Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  <div class="notification-item">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="notification-match">${reminder.fixture}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="notification-time">${reminder.time} â€¢ ${reminder.league}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="notification-actions">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${isLive ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="notification-btn watch" onclick="watchReminder('${reminder.stream_url}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-eye"></i> Watch Live
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="notification-btn remove" onclick="removeReminder(${index})">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-trash"></i> Remove
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  }).join('');
}

function watchReminder(streamUrl) {
Â  Â  if (streamUrl && streamUrl !== 'N/A' && streamUrl !== '#') {
Â  Â  Â  Â  window.open(streamUrl, '_blank');
Â  Â  } else {
Â  Â  Â  Â  alert('No stream available for this match yet.');
Â  Â  }
}

function removeReminder(index) {
Â  Â  userReminders.splice(index, 1);
Â  Â  localStorage.setItem('vieusReminders', JSON.stringify(userReminders));
Â  Â  updateNotificationBadge();
Â  Â  renderNotificationList();
}

// Toast notification function
function showToastNotification(reminder) {
Â  Â  toastMatch.textContent = reminder.fixture;
Â  Â  toastTime.textContent = `Starts at ${reminder.time}`;
Â  Â  toastNotification.classList.add('active');
Â  Â  setTimeout(() => {
Â  Â  Â  Â  toastNotification.classList.remove('active');
Â  Â  }, 5000);
}

function openModal(fixture) {
Â  Â  currentModalFixture = fixture;
Â  Â  modalMatchTitle.textContent = fixture.fixture || 'Match Details';
Â  Â  modalMatchLeague.textContent = fixture.league || 'Unknown League';
Â  Â  modalMatchTime.textContent = fixture.time || 'Time not specified';
Â  Â  modalMatchVenue.textContent = fixture.venue || 'Venue not specified';
Â  Â  modalMatchStatus.textContent = fixture.status || 'Scheduled';
Â  Â  modalMatchBroadcast.textContent = fixture.broadcast || 'Check schedule for broadcast details';

Â  Â  if (fixture.stream_url && fixture.stream_url !== 'N/A' && fixture.stream_url !== '#') {
Â  Â  Â  Â  modalWatchBtn.disabled = false;
Â  Â  Â  Â  modalWatchBtn.innerHTML = '<i class="fas fa-eye"></i> Watch Now';
Â  Â  } else {
Â  Â  Â  Â  modalWatchBtn.disabled = true;
Â  Â  Â  Â  modalWatchBtn.innerHTML = '<i class="fas fa-eye-slash"></i> No Stream Available';
Â  Â  }

Â  Â  const isAlreadyReminded = userReminders.some(r =>Â 
Â  Â  Â  Â  r.fixture === fixture.fixture && r.time === fixture.time
Â  Â  );
Â  Â  if (isAlreadyReminded) {
Â  Â  Â  Â  modalReminderBtn.disabled = true;
Â  Â  Â  Â  modalReminderBtn.innerHTML = '<i class="fas fa-bell-slash"></i> Already Reminded';
Â  Â  } else {
Â  Â  Â  Â  modalReminderBtn.disabled = false;
Â  Â  Â  Â  modalReminderBtn.innerHTML = '<i class="far fa-bell"></i> Set Reminder';
Â  Â  }

Â  Â  modalCrossReferences.innerHTML = '';
Â  Â  matchModal.classList.add('active');
Â  Â  document.body.style.overflow = 'hidden';
}

function closeModal() {
Â  Â  matchModal.classList.remove('active');
Â  Â  document.body.style.overflow = 'auto';
Â  Â  currentModalFixture = null;
}

function setReminder(fixture) {
Â  Â  const isAlreadyReminded = userReminders.some(r =>Â 
Â  Â  Â  Â  r.fixture === fixture.fixture && r.time === fixture.time
Â  Â  );
Â  Â  if (isAlreadyReminded) {
Â  Â  Â  Â  alert('You already have a reminder for this match!');
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  userReminders.push({
Â  Â  Â  Â  fixture: fixture.fixture,
Â  Â  Â  Â  league: fixture.league,
Â  Â  Â  Â  time: fixture.time,
Â  Â  Â  Â  stream_url: fixture.stream_url,
Â  Â  Â  Â  sport: currentSport,
Â  Â  Â  Â  added: new Date().toISOString()
Â  Â  });

Â  Â  localStorage.setItem('vieusReminders', JSON.stringify(userReminders));
Â  Â  updateNotificationBadge();
Â  Â  renderNotificationList();
Â  Â  alert(`Reminder set for: ${fixture.fixture} at ${fixture.time}`);
Â  Â  modalReminderBtn.disabled = true;
Â  Â  modalReminderBtn.innerHTML = '<i class="fas fa-bell-slash"></i> Already Reminded';
}

// Initialize with live
currentSport = 'live';
</script>
</body>
</html>
