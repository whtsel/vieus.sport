<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vieus Sport - Football Streams</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* ===== UPDATED STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        :root {
            --primary-blue: #00ccff;
            --dark-bg: #0a0a12;
            --graphite: #1a1a1a;
            --wine-red: #8b0000;
            --cream-yellow: #fff8e1;
            --orange-cream: #ffd7b5;
            --cyan: #00ccff;
            --text-light: #ffffff;
            --text-gray: #cccccc;
            --glass-white: rgba(255, 255, 255, 0.1);
            --hot-color: #ff3366;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 60px;
        }

        /* Background pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1543353074-8c8c8c6b7c1c?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            opacity: 0.08;
            z-index: -1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 16px;
        }

        /* ===== HEADER ===== */
        header {
            background: var(--graphite);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--glass-white);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo i {
            color: var(--cyan);
            font-size: 1.6rem;
        }

        /* FOOTBALL TAB ON LEFT */
        .sport-header-tab {
            background: var(--cyan);
            color: var(--graphite);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-right: auto;
        }

        /* SEARCH BAR ON RIGHT */
        .search-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-bar {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-white);
            border-radius: 25px;
            padding: 10px 20px;
            color: var(--text-light);
            font-size: 0.9rem;
            width: 300px;
            transition: all 0.3s;
        }

        .search-bar:focus {
            outline: none;
            border-color: var(--cyan);
            background: rgba(255, 255, 255, 0.15);
            width: 350px;
        }

        .search-btn {
            background: var(--cyan);
            color: var(--graphite);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-btn:hover {
            background: #00a8e0;
            transform: scale(1.05);
        }

        /* ===== NOTIFICATION SLIDE BAR ===== */
        .notification-bar {
            position: fixed;
            top: 70px;
            right: 20px;
            background: var(--wine-red);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transform: translateX(150%);
            transition: transform 0.5s ease-in-out;
            max-width: 400px;
        }

        .notification-bar.show {
            transform: translateX(0);
        }

        .notification-icon {
            font-size: 1.2rem;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .notification-message {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .notification-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .notification-close:hover {
            opacity: 1;
        }

        /* ===== LEAGUE GROUPING ===== */
        .league-section {
            margin-bottom: 30px;
        }

        .league-header {
            background: linear-gradient(90deg, rgba(139, 0, 0, 0.2), rgba(22, 22, 32, 0.8));
            padding: 12px 20px;
            border-radius: 12px;
            margin: 20px 0 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--wine-red);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        /* HOT INDICATOR */
        .hot-indicator {
            position: absolute;
            top: -10px;
            left: -10px;
            background: var(--hot-color);
            color: white;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 12px 15px 5px 15px;
            transform: rotate(-45deg);
            transform-origin: center;
            z-index: 2;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .hot-indicator::after {
            content: "HOT";
            display: block;
            transform: rotate(45deg);
            text-align: center;
        }

        .league-header:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.3);
            border-left: 4px solid var(--cyan);
        }

        .league-header-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .league-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .league-icon i {
            color: var(--cyan);
            font-size: 1.1rem;
        }

        .league-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
        }

        .match-count {
            background: var(--wine-red);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
        }

        .league-matches {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 10px;
        }

        .league-section.collapsed .league-matches {
            display: none;
        }

        /* ===== MATCH CARDS ===== */
        .match-card {
            background: var(--graphite);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* REMOVED HOT CORNER FOR MATCH CARDS */

        /* LIVE CARDS - WINE RED */
        .match-card.live {
            border: 2px solid var(--wine-red);
            border-left: 4px solid var(--wine-red);
        }

        .match-card.live .team-name,
        .match-card.live .match-league {
            color: white !important;
        }

        .match-card.live .match-time {
            color: var(--cream-yellow) !important;
            font-weight: 700;
        }

        /* SCHEDULED/UPCOMING CARDS - ORANGE CREAM */
        .match-card.upcoming {
            background: var(--orange-cream);
            border: 2px solid #ff9a3c;
        }

        .match-card.upcoming .team-name,
        .match-card.upcoming .match-league {
            color: #333 !important;
        }

        .match-card.upcoming .match-time {
            color: #333 !important;
            font-weight: 600;
        }

        .match-card.upcoming .team-logo {
            border: 2px solid rgba(0, 0, 0, 0.1);
        }

        /* Status badges */
        .match-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 6px 15px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 2;
        }

        .status-live {
            background: var(--cream-yellow);
            color: var(--wine-red);
            font-weight: bold;
        }

        .status-upcoming {
            background: #333;
            color: var(--orange-cream);
            font-weight: bold;
        }

        /* Match info */
        .match-info-header {
            margin-bottom: 20px;
            text-align: center;
            width: 100%;
        }

        .match-league {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .match-time {
            font-size: 0.95rem;
            font-weight: 600;
        }

        /* Teams display */
        .teams-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            width: 100%;
        }

        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }

        .team-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 12px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid var(--glass-white);
            background: white;
            padding: 10px;
        }

        .team-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .team-name {
            font-size: 0.95rem;
            font-weight: 600;
            text-align: center;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .vs-divider {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--cyan);
        }

        .match-card.upcoming .vs-divider {
            color: #ff6b35;
        }

        /* SINGLE WATCH BUTTON - CENTERED */
        .watch-btn-container {
            width: 100%;
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }

        .watch-btn {
            padding: 12px 40px;
            background: var(--cyan);
            color: var(--graphite);
            border: none;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .watch-btn:hover {
            background: #00a8e0;
            transform: translateY(-2px);
        }

        .match-card.upcoming .watch-btn {
            background: #ff6b35;
            color: white;
        }

        .match-card.upcoming .watch-btn:hover {
            background: #ff5722;
        }

        /* ===== SECTION HEADER ===== */
        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 30px 0 20px;
        }

        .back-btn {
            background: var(--graphite);
            border: 1px solid var(--glass-white);
            color: var(--text-light);
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: var(--cyan);
            color: var(--graphite);
            transform: translateX(-3px);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--cyan);
        }

        .section-actions {
            display: flex;
            gap: 8px;
            margin-left: auto;
        }

        .action-btn {
            padding: 8px 16px;
            background: var(--graphite);
            border: 1px solid var(--glass-white);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .action-btn:hover {
            background: var(--cyan);
            color: var(--graphite);
        }

        /* ===== PREVIEW MODAL ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--graphite);
            border-radius: 20px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            border: 2px solid var(--wine-red);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .modal-title {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            line-height: 1.2;
            margin-bottom: 10px;
        }

        .modal-competition {
            color: var(--cyan);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .modal-rating {
            color: #ffcc00;
            font-size: 1.3rem;
            margin: 10px 0 20px;
        }

        .modal-close {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--graphite);
            border: 1px solid var(--glass-white);
            color: var(--text-gray);
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: var(--cyan);
            color: var(--graphite);
            transform: rotate(90deg);
        }

        /* Teams in modal */
        .modal-teams {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin: 30px 0;
        }

        .modal-team {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal-team-logo {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid var(--cream-yellow);
            background: white;
            padding: 15px;
            margin-bottom: 15px;
        }

        .modal-team-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .modal-team-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            text-align: center;
        }

        .modal-vs {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--cyan);
        }

        /* Stream links section */
        .modal-streams {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
        }

        .modal-streams.active {
            display: block;
        }

        .streams-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .streams-title i {
            color: var(--cyan);
        }

        .streams-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .stream-item {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid var(--cyan);
            text-align: center;
        }

        .stream-item:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }

        .stream-language {
            font-weight: 600;
            color: white;
            font-size: 0.95rem;
            margin-bottom: 5px;
        }

        .stream-quality {
            color: var(--text-gray);
            font-size: 0.85rem;
        }

        .no-streams {
            text-align: center;
            padding: 20px;
            color: var(--text-gray);
        }

        .no-streams i {
            font-size: 2rem;
            margin-bottom: 10px;
            opacity: 0.5;
        }

        /* Modal actions */
        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modal-btn.primary {
            background: var(--cyan);
            color: var(--graphite);
        }

        .modal-btn.primary:hover {
            background: #00a8e0;
            transform: translateY(-2px);
        }

        .modal-btn.secondary {
            background: var(--graphite);
            color: var(--text-light);
            border: 2px solid var(--glass-white);
        }

        .modal-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        /* ===== MOBILE DOCK ===== */
        .mobile-dock {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--graphite);
            padding: 12px 0;
            border-top: 1px solid var(--glass-white);
            z-index: 1000;
            display: flex;
            justify-content: space-around;
        }

        .dock-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-gray);
            font-size: 0.7rem;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 12px;
            min-width: 60px;
            position: relative;
        }

        .dock-item i {
            font-size: 1.4rem;
            margin-bottom: 4px;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Specific styling for each dock item */
        .dock-item[data-view="home"] i {
            background: var(--cyan);
            color: #000;
        }

        .dock-item[data-view="live"] i {
            background: #ff0000;
            color: #000000;
            border-radius: 8px;
        }

        .dock-item[data-view="upcoming"] i {
            background: var(--orange-cream);
            color: #333;
        }

        .dock-item[data-view="account"] i {
            background: #555;
            color: #fff;
        }

        .dock-item:hover {
            color: var(--text-light);
        }

        .dock-item.active {
            color: var(--cyan);
            transform: translateY(-5px);
        }

        .dock-item.active i {
            transform: scale(1.1);
        }

        .dock-item.active[data-view="home"] i {
            background: var(--cyan);
            color: #000;
        }

        .dock-item.active[data-view="live"] i {
            background: #ff3333;
            color: #000;
        }

        .dock-item.active[data-view="upcoming"] i {
            background: #ffcc99;
            color: #333;
        }

        .dock-item.active[data-view="account"] i {
            background: #777;
            color: #fff;
        }

        /* ===== FOOTER ===== */
        footer {
            background: var(--graphite);
            padding: 30px 0 80px;
            margin-top: 40px;
            border-top: 1px solid var(--glass-white);
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .league-matches {
                grid-template-columns: 1fr;
            }
            
            .mobile-dock {
                display: flex;
            }
            
            body {
                padding-bottom: 70px;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .modal-teams {
                gap: 20px;
            }
            
            .modal-team-logo {
                width: 100px;
                height: 100px;
            }
            
            .modal-title {
                font-size: 1.5rem;
            }
            
            .header-content {
                flex-wrap: wrap;
            }
            
            .search-bar {
                width: 200px;
            }
            
            .search-bar:focus {
                width: 250px;
            }
            
            .notification-bar {
                top: 60px;
                right: 10px;
                left: 10px;
                max-width: calc(100% - 20px);
            }
        }

        @media (min-width: 769px) {
            .mobile-dock {
                display: none;
            }
            
            body {
                padding-bottom: 0;
            }
            
            footer {
                padding-bottom: 30px;
            }
        }

        @media (max-width: 480px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .team-logo {
                width: 60px;
                height: 60px;
            }
            
            .modal-content {
                padding: 16px;
            }
            
            .modal-team-logo {
                width: 80px;
                height: 80px;
            }
            
            .modal-vs {
                font-size: 1.8rem;
            }
            
            .search-bar {
                width: 100%;
            }
            
            .search-bar:focus {
                width: 100%;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--cyan);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-play-circle"></i>
                    <span>Vieus Sport</span>
                </div>
                <div class="sport-header-tab">
                    <i class="fas fa-futbol"></i>
                    Football
                </div>
                <div class="search-container">
                    <input type="text" class="search-bar" id="searchBar" placeholder="Search matches, teams, leagues...">
                    <button class="search-btn" id="searchBtn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Notification Bar for Reminders -->
    <div class="notification-bar" id="notificationBar">
        <div class="notification-icon">
            <i class="fas fa-bell"></i>
        </div>
        <div class="notification-content">
            <div class="notification-title" id="notificationTitle">Reminder Set!</div>
            <div class="notification-message" id="notificationMessage">You'll be notified before the match starts</div>
        </div>
        <button class="notification-close" id="notificationClose">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Section Header with Back Button -->
        <div class="section-header">
            <button class="back-btn" id="backBtn" style="display: none;">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h2 class="section-title" id="sectionTitle">
                <i class="fas fa-broadcast-tower"></i> Live Matches
            </h2>
            <div class="section-actions">
                <button class="action-btn" id="refreshBtn">
                    <i class="fas fa-redo"></i> Refresh
                </button>
            </div>
        </div>
        
        <!-- Live Matches -->
        <div id="liveContainer">
            <!-- Dynamically populated with league grouping -->
        </div>

        <!-- Upcoming Matches Section -->
        <div class="section-header">
            <h2 class="section-title">
                <i class="far fa-clock"></i> Scheduled Matches
            </h2>
        </div>
        
        <div id="upcomingContainer">
            <!-- Dynamically populated with league grouping -->
        </div>
    </div>

    <!-- Mobile Dock Navigation -->
    <div class="mobile-dock">
        <div class="dock-item active" data-view="home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="dock-item" data-view="live">
            <i class="fas fa-broadcast-tower"></i>
            <span>Live</span>
        </div>
        <div class="dock-item" data-view="upcoming">
            <i class="far fa-clock"></i>
            <span>Schedule</span>
        </div>
        <div class="dock-item" data-view="account">
            <i class="fas fa-user-circle"></i>
            <span>Account</span>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-play-circle"></i>
                    Vieus Sport - Football Streaming
                </div>
                <div class="copyright">
                    &copy; 2024 Vieus Sport. Premium football streaming experience.
                </div>
            </div>
        </div>
    </footer>

    <!-- Preview Popup Modal -->
    <div class="modal-overlay" id="matchModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
                <h3 class="modal-title" id="modalTitle">Match Details</h3>
                <div class="modal-competition" id="modalCompetition"></div>
                <div class="modal-rating" id="modalRating">★★★</div>
            </div>
            
            <div class="modal-teams" id="modalTeams">
                <!-- Dynamically populated -->
            </div>
            
            <div class="modal-info-strip" id="modalInfoStrip">
                <!-- Dynamically populated -->
            </div>
            
            <div class="modal-streams" id="modalStreams">
                <h4 class="streams-title">
                    <i class="fas fa-stream"></i> Available Streams
                </h4>
                <div class="streams-list" id="streamsList">
                    <!-- Stream links will appear here -->
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="modal-btn secondary" id="modalReminderBtn">
                    <i class="far fa-bell"></i> SET REMINDER
                </button>
                <button class="modal-btn primary" id="modalWatchBtn">
                    <i class="fas fa-play"></i> WATCH NOW
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== CONFIGURATION =====
        const API_BASE_URL = 'https://vieus-app.onrender.com';
        let allMatches = [];
        let filteredMatches = [];
        let currentView = 'home';
        let currentModalMatch = null;
        let userReminders = JSON.parse(localStorage.getItem('vieusReminders')) || [];

        // Define importance ranking for competitions (global popularity)
        const COMPETITION_RANKING = {
            // HOT COMPETITIONS - Top Tier with HOT indicator (UEFA Champions League only)
            "uefa champions league": { rank: 1, icon: "fas fa-trophy", color: "#ffd700", hot: true, displayName: "UEFA Champions League" },
            "premier league": { rank: 2, icon: "fas fa-crown", color: "#3d195b", hot: true, displayName: "English Premier League" },
            "la liga": { rank: 3, icon: "fas fa-futbol", color: "#ff0000", hot: true },
            "bundesliga": { rank: 4, icon: "fas fa-shield-alt", color: "#dd0000", hot: true },
            "serie a": { rank: 5, icon: "fas fa-flag", color: "#008c45", hot: true },
            "ligue 1": { rank: 6, icon: "fas fa-star", color: "#0d5eaf", hot: true, displayName: "League 1 France" },
            "europa league": { rank: 7, icon: "fas fa-trophy", color: "#ff6b00", hot: true },
            
            // Second Tier - Popular International
            "europa conference league": { rank: 8, icon: "fas fa-medal", color: "#00a8e0" },
            "world cup": { rank: 9, icon: "fas fa-globe", color: "#1e90ff" },
            "euro": { rank: 10, icon: "fas fa-globe-europe", color: "#0047ab" },
            "copa america": { rank: 11, icon: "fas fa-globe-americas", color: "#ffcc00" },
            "african cup of nations": { rank: 12, icon: "fas fa-globe-africa", color: "#008000" },
            "asian cup": { rank: 13, icon: "fas fa-globe-asia", color: "#ff0000" },
            
            // Other Champions Leagues (non-UEFA) - placed at bottom
            "afc champions league": { rank: 100, icon: "fas fa-trophy", color: "#cccccc" },
            "concacaf champions league": { rank: 101, icon: "fas fa-trophy", color: "#cccccc" },
            "caf champions league": { rank: 102, icon: "fas fa-trophy", color: "#cccccc" },
            
            // Third Tier - Domestic Cups & Important Leagues
            "fa cup": { rank: 14, icon: "fas fa-cup", color: "#ff0000" },
            "copa del rey": { rank: 15, icon: "fas fa-crown", color: "#ffcc00" },
            "dfb-pokal": { rank: 16, icon: "fas fa-trophy", color: "#000000" },
            "coppa italia": { rank: 17, icon: "fas fa-flag", color: "#008c45" },
            "coupe de france": { rank: 18, icon: "fas fa-wine-glass-alt", color: "#0055a4" },
            
            // Other Premier Leagues (non-English) - Placed at bottom
            "scottish premiership": { rank: 50, icon: "fas fa-futbol", color: "#0065bf" },
            "russian premier league": { rank: 51, icon: "fas fa-futbol", color: "#d52b1e" },
            "primeira liga": { rank: 52, icon: "fas fa-futbol", color: "#006600" },
            "eredivisie": { rank: 53, icon: "fas fa-futbol", color: "#ff9900" },
            "super lig": { rank: 54, icon: "fas fa-futbol", color: "#e30a17" },
            
            // Fourth Tier - Championship/2nd Divisions
            "championship": { rank: 60, icon: "fas fa-arrow-up", color: "#0d5eaf" },
            "league one": { rank: 61, icon: "fas fa-chevron-up", color: "#ff6b00" },
            "league two": { rank: 62, icon: "fas fa-chevron-double-up", color: "#800080" },
            "segunda division": { rank: 63, icon: "fas fa-futbol", color: "#ff0000" },
            "2. bundesliga": { rank: 64, icon: "fas fa-shield-alt", color: "#dd0000" },
            "serie b": { rank: 65, icon: "fas fa-flag", color: "#008c45" },
            
            // Fifth Tier - Youth & Women's Leagues
            "youth league": { rank: 70, icon: "fas fa-user-graduate", color: "#00ccff" },
            "u23": { rank: 71, icon: "fas fa-user-graduate", color: "#0099cc" },
            "u19": { rank: 72, icon: "fas fa-user-graduate", color: "#006699" },
            "women": { rank: 73, icon: "fas fa-venus", color: "#ff69b4" },
            "women's": { rank: 74, icon: "fas fa-venus", color: "#ff1493" }
        };

        // List of competitions that should have HOT indicator
        const HOT_COMPETITIONS = [
            "uefa champions league",
            "premier league", 
            "la liga",
            "bundesliga",
            "serie a",
            "ligue 1",
            "europa league"
        ];

        // ===== DOM ELEMENTS =====
        const liveContainer = document.getElementById('liveContainer');
        const upcomingContainer = document.getElementById('upcomingContainer');
        const backBtn = document.getElementById('backBtn');
        const sectionTitle = document.getElementById('sectionTitle');
        const refreshBtn = document.getElementById('refreshBtn');
        const dockItems = document.querySelectorAll('.dock-item');
        const matchModal = document.getElementById('matchModal');
        const modalClose = document.getElementById('modalClose');
        const streamsList = document.getElementById('streamsList');
        const modalStreams = document.getElementById('modalStreams');
        const modalReminderBtn = document.getElementById('modalReminderBtn');
        const modalWatchBtn = document.getElementById('modalWatchBtn');
        const searchBar = document.getElementById('searchBar');
        const searchBtn = document.getElementById('searchBtn');
        const notificationBar = document.getElementById('notificationBar');
        const notificationTitle = document.getElementById('notificationTitle');
        const notificationMessage = document.getElementById('notificationMessage');
        const notificationClose = document.getElementById('notificationClose');

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setupEventListeners();
        });

        // ===== DATA LOADING =====
        async function loadData() {
            try {
                showLoading();
                
                const response = await fetch(API_BASE_URL);
                if (!response.ok) throw new Error('Network response failed');
                
                const data = await response.json();
                
                // Filter matches - STRICTLY require both logos
                allMatches = data.filter(match => {
                    const homeTeam = getTeamName(match, 0);
                    const awayTeam = getTeamName(match, 1);
                    const homeLogo = getTeamLogo(match, 0);
                    const awayLogo = getTeamLogo(match, 1);
                    
                    // Strict validation for team names
                    const hasValidHomeName = homeTeam && homeTeam.trim() !== '' && 
                                            !/^\d+$/.test(homeTeam.replace(/\s/g, '')) &&
                                            homeTeam !== 'Home Team' && 
                                            homeTeam.length > 2 &&
                                            !homeTeam.toLowerCase().includes('undefined');
                    
                    const hasValidAwayName = awayTeam && awayTeam.trim() !== '' && 
                                            !/^\d+$/.test(awayTeam.replace(/\s/g, '')) &&
                                            awayTeam !== 'Away Team' && 
                                            awayTeam.length > 2 &&
                                            !awayTeam.toLowerCase().includes('undefined');
                    
                    // Check if BOTH logos exist and are valid URLs
                    const hasBothLogos = homeLogo && 
                                        homeLogo.trim() !== '' && 
                                        homeLogo !== 'null' &&
                                        homeLogo !== 'undefined' &&
                                        !homeLogo.includes('placeholder') &&
                                        awayLogo && 
                                        awayLogo.trim() !== '' && 
                                        awayLogo !== 'null' &&
                                        awayLogo !== 'undefined' &&
                                        !awayLogo.includes('placeholder');
                    
                    return hasValidHomeName && hasValidAwayName && hasBothLogos;
                });
                
                console.log(`Loaded ${allMatches.length} matches`);
                filteredMatches = [...allMatches];
                renderAllMatches();
            } catch (error) {
                console.error('Error loading data:', error);
                showError();
            }
        }

        function showLoading() {
            liveContainer.innerHTML = `
                <div style="text-align: center; padding: 40px; color: var(--text-gray);">
                    <i class="fas fa-spinner fa-spin fa-2x"></i>
                    <p style="margin-top: 15px;">Loading live matches...</p>
                </div>
            `;
            
            upcomingContainer.innerHTML = `
                <div style="text-align: center; padding: 40px; color: var(--text-gray);">
                    <i class="fas fa-spinner fa-spin fa-2x"></i>
                    <p style="margin-top: 15px;">Loading scheduled matches...</p>
                </div>
            `;
        }

        function showError() {
            const errorHtml = `
                <div style="text-align: center; padding: 40px; color: var(--text-gray);">
                    <i class="fas fa-exclamation-triangle fa-2x"></i>
                    <h3 style="color: var(--text-light); margin: 15px 0 10px;">Connection Error</h3>
                    <p>Unable to load matches. Please try again later.</p>
                    <button class="watch-btn" onclick="loadData()" style="margin-top: 20px; width: auto; padding: 10px 30px;">
                        <i class="fas fa-redo"></i> Retry
                    </button>
                </div>
            `;
            
            liveContainer.innerHTML = errorHtml;
            upcomingContainer.innerHTML = errorHtml;
        }

        // ===== SEARCH FUNCTIONALITY =====
        function performSearch() {
            const searchTerm = searchBar.value.toLowerCase().trim();
            
            if (!searchTerm) {
                filteredMatches = [...allMatches];
            } else {
                filteredMatches = allMatches.filter(match => {
                    const homeTeam = getTeamName(match, 0).toLowerCase();
                    const awayTeam = getTeamName(match, 1).toLowerCase();
                    const competition = (match.competition || '').toLowerCase();
                    
                    return homeTeam.includes(searchTerm) || 
                           awayTeam.includes(searchTerm) || 
                           competition.includes(searchTerm);
                });
            }
            
            renderAllMatches();
        }

        // ===== LEAGUE IMPORTANCE CALCULATION =====
        function getCompetitionImportance(competitionName) {
            if (!competitionName) return { rank: 999, icon: "fas fa-futbol", color: "#cccccc", hot: false };
            
            const nameLower = competitionName.toLowerCase();
            
            // Check for exact matches in ranking
            for (const [key, value] of Object.entries(COMPETITION_RANKING)) {
                if (nameLower.includes(key)) {
                    // Check if it's English Premier League specifically
                    if (key === "premier league") {
                        // Make sure it's not other country's premier league
                        if (nameLower.includes("scottish") || 
                            nameLower.includes("russian") || 
                            nameLower.includes("portuguese") ||
                            nameLower.includes("dutch") ||
                            nameLower.includes("turkish")) {
                            continue; // Skip to next iteration
                        }
                        // It's English Premier League
                        return { ...value, displayName: value.displayName || "Premier League" };
                    }
                    
                    return value;
                }
            }
            
            // Check if it's any other "premier league" (non-English)
            if (nameLower.includes("premier league")) {
                return { rank: 50, icon: "fas fa-futbol", color: "#cccccc", hot: false };
            }
            
            // Check if it's a champions league (non-UEFA)
            if (nameLower.includes("champions league")) {
                return { rank: 100, icon: "fas fa-trophy", color: "#cccccc", hot: false };
            }
            
            // Default for unknown competitions
            return { rank: 999, icon: "fas fa-futbol", color: "#cccccc", hot: false };
        }

        // ===== GROUP MATCHES BY IMPORTANCE =====
        function groupMatchesByImportance(matches, isLive) {
            const grouped = {};
            
            // Group by competition
            matches.forEach(match => {
                const competition = match.competition || 'Other Matches';
                if (!grouped[competition]) {
                    grouped[competition] = [];
                }
                grouped[competition].push(match);
            });
            
            // Convert to array and add importance data
            const groupsArray = Object.keys(grouped).map(competition => {
                const importance = getCompetitionImportance(competition);
                const displayName = importance.displayName || competition;
                const isHot = importance.hot || HOT_COMPETITIONS.some(hotComp => 
                    competition.toLowerCase().includes(hotComp));
                
                return {
                    competition,
                    displayName,
                    matches: grouped[competition],
                    importance: importance.rank,
                    icon: importance.icon,
                    color: importance.color,
                    hot: isHot
                };
            });
            
            // Sort by importance (lower rank = more important)
            groupsArray.sort((a, b) => a.importance - b.importance);
            
            return groupsArray;
        }

        // ===== RENDER MATCHES WITH GROUPING =====
        function renderAllMatches() {
            const liveMatches = filteredMatches.filter(match => match.is_live);
            const upcomingMatches = filteredMatches.filter(match => !match.is_live);

            renderMatchesByImportance(liveContainer, liveMatches, true);
            renderMatchesByImportance(upcomingContainer, upcomingMatches, false);
        }

        function renderMatchesByImportance(container, matches, isLive) {
            container.innerHTML = '';

            if (matches.length === 0) {
                const emptyMessage = isLive ? 
                    'No live matches at the moment' : 
                    'No scheduled matches';
                    
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-gray);">
                        <i class="fas fa-tv-slash fa-2x"></i>
                        <h3 style="color: var(--text-light); margin: 15px 0 10px;">${emptyMessage}</h3>
                        <p>${searchBar.value ? 'Try a different search term' : 'Check back later for more matches'}</p>
                    </div>
                `;
                return;
            }

            // Group matches by importance
            const groups = groupMatchesByImportance(matches, isLive);
            
            // Separate important games (rank < 20) from other games
            const importantGroups = groups.filter(group => group.importance < 20);
            const otherGroups = groups.filter(group => group.importance >= 20);
            
            // Render important games first
            if (importantGroups.length > 0) {
                renderGroupSet(container, importantGroups, isLive, "Top Competitions");
            }
            
            // Render other games at the bottom
            if (otherGroups.length > 0) {
                renderGroupSet(container, otherGroups, isLive, "Other Competitions");
            }
        }

        function renderGroupSet(container, groups, isLive, title) {
            // Add a divider if there are both important and other games
            if (title) {
                const divider = document.createElement('div');
                divider.className = 'section-header';
                divider.style.marginTop = '40px';
                divider.innerHTML = `
                    <h2 class="section-title">
                        <i class="fas fa-futbol"></i> ${title}
                    </h2>
                `;
                container.appendChild(divider);
            }
            
            groups.forEach(group => {
                // Create league section
                const leagueSection = document.createElement('div');
                leagueSection.className = 'league-section';
                
                // Create league header
                const leagueHeader = document.createElement('div');
                leagueHeader.className = 'league-header';
                leagueHeader.style.borderLeftColor = group.color;
                leagueHeader.onclick = function() {
                    leagueSection.classList.toggle('collapsed');
                };
                
                // Add HOT indicator if competition is hot
                if (group.hot) {
                    const hotIndicator = document.createElement('div');
                    hotIndicator.className = 'hot-indicator';
                    leagueHeader.appendChild(hotIndicator);
                }
                
                leagueHeader.innerHTML = `
                    <div class="league-header-content">
                        <div class="league-icon" style="background: ${group.color}20;">
                            <i class="${group.icon}" style="color: ${group.color};"></i>
                        </div>
                        <div class="league-name">${group.displayName}</div>
                    </div>
                    <div class="match-count" style="background: ${group.color};">
                        ${group.matches.length} match${group.matches.length > 1 ? 'es' : ''}
                    </div>
                `;
                
                // Create matches grid
                const matchesGrid = document.createElement('div');
                matchesGrid.className = 'league-matches';
                
                // Add matches to grid
                group.matches.forEach(match => {
                    const matchCard = createMatchCard(match, isLive, group);
                    matchesGrid.appendChild(matchCard);
                });
                
                leagueSection.appendChild(leagueHeader);
                leagueSection.appendChild(matchesGrid);
                container.appendChild(leagueSection);
            });
        }

        function createMatchCard(match, isLive, group) {
            const homeTeam = getTeamName(match, 0);
            const awayTeam = getTeamName(match, 1);
            const homeLogo = getTeamLogo(match, 0);
            const awayLogo = getTeamLogo(match, 1);
            const time = formatTime(match.parsed_datetime || match.date_time);
            
            const card = document.createElement('div');
            card.className = `match-card ${isLive ? 'live' : 'upcoming'}`;
            card.innerHTML = `
                <div class="match-status ${isLive ? 'status-live' : 'status-upcoming'}">
                    ${isLive ? 'LIVE' : 'SCHEDULED'}
                </div>
                
                <div class="match-info-header">
                    <div class="match-league">${group.displayName}</div>
                    <div class="match-time">${time}</div>
                </div>
                
                <div class="teams-display">
                    <div class="team">
                        <div class="team-logo">
                            <img src="${homeLogo}" alt="${homeTeam}" 
                                 onerror="this.onerror=null; this.src='https://via.placeholder.com/80/1a1a1a/ffffff?text=${homeTeam.substring(0,2).toUpperCase()}'">
                        </div>
                        <div class="team-name">${homeTeam}</div>
                    </div>
                    
                    <div class="vs-divider">VS</div>
                    
                    <div class="team">
                        <div class="team-logo">
                            <img src="${awayLogo}" alt="${awayTeam}"
                                 onerror="this.onerror=null; this.src='https://via.placeholder.com/80/1a1a1a/ffffff?text=${awayTeam.substring(0,2).toUpperCase()}'">
                        </div>
                        <div class="team-name">${awayTeam}</div>
                    </div>
                </div>
                
                <div class="watch-btn-container">
                    <button class="watch-btn">
                        <i class="fas fa-eye"></i> PREVIEW
                    </button>
                </div>
            `;
            
            // Add click event for preview
            card.querySelector('.watch-btn').addEventListener('click', () => {
                openPreview(match, group);
            });
            
            return card;
        }

        // ===== NOTIFICATION SYSTEM =====
        function showNotification(title, message, isReminder = true) {
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            notificationBar.classList.add('show');
            
            // Auto-hide after 5 seconds for reminders
            if (isReminder) {
                setTimeout(() => {
                    hideNotification();
                }, 5000);
            }
        }

        function hideNotification() {
            notificationBar.classList.remove('show');
        }

        // ===== PREVIEW MODAL =====
        function openPreview(match, group) {
            currentModalMatch = match;
            
            const homeTeam = getTeamName(match, 0);
            const awayTeam = getTeamName(match, 1);
            const homeLogo = getTeamLogo(match, 0);
            const awayLogo = getTeamLogo(match, 1);
            const time = formatTime(match.parsed_datetime || match.date_time);
            const broadcastInfo = getBroadcastInfo(match);
            const displayCompetition = group ? group.displayName : match.competition;
            const isHotCompetition = group ? group.hot : false;
            
            // Set modal title and info
            document.getElementById('modalTitle').textContent = `${homeTeam} vs ${awayTeam}`;
            document.getElementById('modalCompetition').textContent = displayCompetition;
            
            // Add HOT badge to modal if competition is hot
            if (isHotCompetition) {
                const modalCompetition = document.getElementById('modalCompetition');
                modalCompetition.innerHTML = `${displayCompetition} <span style="color: var(--hot-color); margin-left: 10px;"><i class="fas fa-fire"></i> HOT</span>`;
            }
            
            // Set teams in modal
            document.getElementById('modalTeams').innerHTML = `
                <div class="modal-team">
                    <div class="modal-team-logo">
                        <img src="${homeLogo}" alt="${homeTeam}"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/140/1a1a1a/ffffff?text=${homeTeam.substring(0,2).toUpperCase()}'">
                    </div>
                    <div class="modal-team-name">${homeTeam}</div>
                </div>
                <div class="modal-vs">VS</div>
                <div class="modal-team">
                    <div class="modal-team-logo">
                        <img src="${awayLogo}" alt="${awayTeam}"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/140/1a1a1a/ffffff?text=${awayTeam.substring(0,2).toUpperCase()}'">
                    </div>
                    <div class="modal-team-name">${awayTeam}</div>
                </div>
            `;
            
            // Set info strip
            document.getElementById('modalInfoStrip').innerHTML = `
                <div class="info-item">
                    <i class="far fa-calendar"></i>
                    <span>${time}</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-circle" style="color: ${match.is_live ? '#ffcc00' : 'var(--cyan)'}"></i>
                    <span>${match.is_live ? 'LIVE' : 'SCHEDULED'}</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-globe"></i>
                    <span>${broadcastInfo}</span>
                </div>
            `;
            
            // Populate stream links
            populateStreamLinks(match);
            
            // Update reminder button
            const isReminded = userReminders.some(r => r.event_id === match.event_id);
            modalReminderBtn.innerHTML = isReminded ? 
                '<i class="fas fa-bell-slash"></i> REMOVE REMINDER' :
                '<i class="far fa-bell"></i> SET REMINDER';
                
            matchModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function getBroadcastInfo(match) {
            if (match.streams && match.streams.length > 0) {
                const languages = [...new Set(match.streams.map(s => s.language).filter(Boolean))];
                return languages.length > 0 ? languages.join(', ') : 'Multiple languages';
            }
            return 'Check schedule';
        }

        function populateStreamLinks(match) {
            if (!match.streams || match.streams.length === 0) {
                streamsList.innerHTML = `
                    <div class="no-streams">
                        <i class="fas fa-stream"></i>
                        <p>No streams available for this match</p>
                    </div>
                `;
                modalStreams.classList.remove('active');
                return;
            }
            
            const availableStreams = match.streams.filter(stream => 
                stream.stream_url && stream.stream_url !== '#' && 
                !stream.stream_url.includes('livetv.sx')
            );
            
            if (availableStreams.length === 0) {
                streamsList.innerHTML = `
                    <div class="no-streams">
                        <i class="fas fa-stream"></i>
                        <p>No direct stream links available</p>
                    </div>
                `;
                modalStreams.classList.remove('active');
                return;
            }
            
            streamsList.innerHTML = availableStreams.map((stream, index) => {
                const language = stream.language || 'Unknown';
                const quality = stream.rating || stream.bitrate || stream.stream_type || 'HD';
                const percentage = stream.rating ? stream.rating.replace('%', '') : '95';
                
                return `
                    <div class="stream-item" onclick="window.open('${stream.stream_url}', '_blank')">
                        <div class="stream-language">${language} - ${quality}</div>
                        <div class="stream-quality">${percentage}%</div>
                    </div>
                `;
            }).join('');
            
            modalStreams.classList.add('active');
        }

        function closeModal() {
            matchModal.classList.remove('active');
            document.body.style.overflow = 'auto';
            currentModalMatch = null;
        }

        // ===== WATCH NOW FUNCTION =====
        function watchNow() {
            if (!currentModalMatch) return;
            
            let streamUrl = null;
            
            if (currentModalMatch.streams && currentModalMatch.streams.length > 0) {
                const directStream = currentModalMatch.streams.find(s => 
                    s.stream_url && s.stream_url !== '#' && 
                    !s.stream_url.includes('livetv.sx')
                );
                
                if (directStream) {
                    streamUrl = directStream.stream_url;
                } else {
                    const firstStream = currentModalMatch.streams.find(s => s.stream_url && s.stream_url !== '#');
                    if (firstStream) streamUrl = firstStream.stream_url;
                }
            }
            
            if (streamUrl) {
                window.open(streamUrl, '_blank');
            } else {
                alert('No direct stream available for this match. Try the available links in the preview.');
            }
        }

        // ===== REMINDER SYSTEM =====
        function toggleReminder() {
            if (!currentModalMatch) return;
            
            const index = userReminders.findIndex(r => r.event_id === currentModalMatch.event_id);
            
            if (index === -1) {
                // Add reminder
                userReminders.push({
                    event_id: currentModalMatch.event_id,
                    competition: currentModalMatch.competition,
                    matchup: currentModalMatch.matchup,
                    date_time: currentModalMatch.date_time,
                    added: new Date().toISOString()
                });
                
                localStorage.setItem('vieusReminders', JSON.stringify(userReminders));
                
                // Show notification
                const homeTeam = getTeamName(currentModalMatch, 0);
                const awayTeam = getTeamName(currentModalMatch, 1);
                showNotification(
                    'Reminder Set!',
                    `You'll be notified before ${homeTeam} vs ${awayTeam} starts`
                );
            } else {
                // Remove reminder
                userReminders.splice(index, 1);
                localStorage.setItem('vieusReminders', JSON.stringify(userReminders));
                
                // Show notification
                const homeTeam = getTeamName(currentModalMatch, 0);
                const awayTeam = getTeamName(currentModalMatch, 1);
                showNotification(
                    'Reminder Removed',
                    `Reminder for ${homeTeam} vs ${awayTeam} has been removed`
                );
            }
            
            // Update reminder button
            const isReminded = userReminders.some(r => r.event_id === currentModalMatch.event_id);
            modalReminderBtn.innerHTML = isReminded ? 
                '<i class="fas fa-bell-slash"></i> REMOVE REMINDER' :
                '<i class="far fa-bell"></i> SET REMINDER';
        }

        // ===== VIEW MANAGEMENT =====
        function switchView(view) {
            currentView = view;
            
            dockItems.forEach(item => {
                item.classList.toggle('active', item.dataset.view === view);
            });
            
            switch(view) {
                case 'home':
                    backBtn.style.display = 'none';
                    sectionTitle.innerHTML = '<i class="fas fa-broadcast-tower"></i> Live Matches';
                    liveContainer.style.display = 'block';
                    upcomingContainer.style.display = 'block';
                    break;
                    
                case 'live':
                    backBtn.style.display = 'flex';
                    sectionTitle.innerHTML = '<i class="fas fa-broadcast-tower"></i> Live Matches';
                    liveContainer.style.display = 'block';
                    upcomingContainer.style.display = 'none';
                    break;
                    
                case 'upcoming':
                    backBtn.style.display = 'flex';
                    sectionTitle.innerHTML = '<i class="far fa-clock"></i> Scheduled Matches';
                    liveContainer.style.display = 'none';
                    upcomingContainer.style.display = 'block';
                    break;
                    
                case 'account':
                    showAccountView();
                    break;
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showAccountView() {
            backBtn.style.display = 'flex';
            sectionTitle.innerHTML = '<i class="fas fa-user-circle"></i> Account';
            liveContainer.style.display = 'none';
            upcomingContainer.style.display = 'none';
            
            let accountView = document.getElementById('accountView');
            if (!accountView) {
                accountView = document.createElement('div');
                accountView.id = 'accountView';
                const sectionHeader = document.querySelector('.section-header');
                sectionHeader.parentNode.insertBefore(accountView, sectionHeader.nextSibling);
            }
            
            accountView.innerHTML = `
                <div style="text-align: center; padding: 40px; color: var(--text-gray);">
                    <i class="fas fa-user-circle fa-3x" style="margin-bottom: 20px;"></i>
                    <h3 style="color: var(--text-light); margin-bottom: 20px;">Your Reminders</h3>
                    <div id="remindersList" style="text-align: left; max-width: 500px; margin: 0 auto;">
                        ${userReminders.length === 0 ? 
                            '<p style="text-align: center; color: var(--text-gray);">No reminders set</p>' : 
                            userReminders.map(reminder => `
                                <div style="background: var(--graphite); padding: 15px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--cyan);">
                                    <div style="font-weight: 600; margin-bottom: 5px;">${reminder.matchup}</div>
                                    <div style="font-size: 0.9rem; color: var(--text-gray);">${reminder.competition}</div>
                                    <div style="font-size: 0.8rem; color: var(--cyan); margin-top: 5px;">
                                        ${formatTime(reminder.date_time)}
                                    </div>
                                </div>
                            `).join('')}
                    </div>
                </div>
            `;
            accountView.style.display = 'block';
        }

        // ===== HELPER FUNCTIONS =====
        function getTeamName(match, index) {
            if (match.team_logos && match.team_logos[index] && match.team_logos[index].team_name) {
                return match.team_logos[index].team_name;
            }
            
            if (match.matchup) {
                const parts = match.matchup.split(/[–\-]/);
                if (parts.length >= 2) {
                    return parts[index].trim();
                }
            }
            
            return index === 0 ? 'Home Team' : 'Away Team';
        }

        function getTeamLogo(match, index) {
            if (match.team_logos && match.team_logos[index] && match.team_logos[index].logo_url) {
                return match.team_logos[index].logo_url;
            }
            return '';
        }

        function formatTime(dateTime) {
            if (!dateTime) return 'TBD';
            
            try {
                const date = new Date(dateTime);
                if (isNaN(date.getTime())) return dateTime;
                
                const now = new Date();
                const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                const matchDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
                
                const timeStr = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                if (matchDate.getTime() === today.getTime()) {
                    return `${timeStr} Today`;
                } else if (matchDate.getTime() === today.getTime() + 86400000) {
                    return `${timeStr} Tomorrow`;
                } else {
                    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                    return `${monthNames[date.getMonth()]} ${date.getDate()}, ${timeStr}`;
                }
            } catch (e) {
                return dateTime;
            }
        }

        // ===== EVENT LISTENERS =====
        function setupEventListeners() {
            backBtn.addEventListener('click', () => switchView('home'));
            refreshBtn.addEventListener('click', loadData);
            
            dockItems.forEach(item => {
                item.addEventListener('click', function() {
                    switchView(this.dataset.view);
                });
            });
            
            modalClose.addEventListener('click', closeModal);
            matchModal.addEventListener('click', function(e) {
                if (e.target === matchModal) closeModal();
            });
            
            modalWatchBtn.addEventListener('click', watchNow);
            modalReminderBtn.addEventListener('click', toggleReminder);
            
            // Search functionality
            searchBtn.addEventListener('click', performSearch);
            searchBar.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // Real-time search as user types
            let searchTimeout;
            searchBar.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(performSearch, 300);
            });
            
            // Notification close
            notificationClose.addEventListener('click', hideNotification);
            
            // Check for upcoming reminders
            setInterval(() => {
                if (currentView === 'live' || currentView === 'home') {
                    loadData();
                }
                
                // Check for upcoming matches with reminders
                checkUpcomingReminders();
            }, 120000);
        }

        function checkUpcomingReminders() {
            const now = new Date();
            
            userReminders.forEach(reminder => {
                try {
                    const matchTime = new Date(reminder.date_time);
                    if (isNaN(matchTime.getTime())) return;
                    
                    // Check if match starts in 15 minutes
                    const timeDiff = matchTime.getTime() - now.getTime();
                    const minutesDiff = timeDiff / (1000 * 60);
                    
                    if (minutesDiff > 0 && minutesDiff <= 15) {
                        // Check if we've already notified for this match
                        const notificationKey = `notified_${reminder.event_id}`;
                        if (!localStorage.getItem(notificationKey)) {
                            showNotification(
                                'Match Starting Soon!',
                                `${reminder.matchup} starts in ${Math.round(minutesDiff)} minutes`,
                                false
                            );
                            localStorage.setItem(notificationKey, 'true');
                        }
                    }
                } catch (e) {
                    console.error('Error checking reminder:', e);
                }
            });
        }

        // ===== GLOBAL FUNCTIONS =====
        window.openPreview = openPreview;
        window.loadData = loadData;
        window.switchView = switchView;
        window.watchNow = watchNow;
        window.performSearch = performSearch;
        window.showNotification = showNotification;
        window.hideNotification = hideNotification;
    </script>
</body>
</html>
